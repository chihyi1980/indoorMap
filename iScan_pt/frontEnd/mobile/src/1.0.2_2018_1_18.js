var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=CryptoJS,b=a.lib.BlockCipher,c=a.algo,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=0;256>o;o++)n[o]=128>o?o<<1:o<<1^283;for(var p=0,q=0,o=0;256>o;o++){var r=q^q<<1^q<<2^q<<3^q<<4,r=r>>>8^255&r^99;d[p]=r,e[r]=p;var s=n[p],t=n[s],u=n[t],v=257*n[r]^16843008*r;f[p]=v<<24|v>>>8,g[p]=v<<16|v>>>16,h[p]=v<<8|v>>>24,i[p]=v,v=16843009*u^65537*t^257*s^16843008*p,j[r]=v<<24|v>>>8,k[r]=v<<16|v>>>16,l[r]=v<<8|v>>>24,m[r]=v,p?(p=s^n[n[n[u^s]]],q^=n[n[q]]):p=q=1}var w=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],f=0;a>f;f++)if(c>f)e[f]=b[f];else{var g=e[f-1];f%c?c>6&&4==f%c&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]):(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=w[f/c|0]<<24),e[f]=e[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?e[f]:e[f-4],b[c]=4>c||4>=f?g:j[d[g>>>24]]^k[d[g>>>16&255]]^l[d[g>>>8&255]]^m[d[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,f,g,h,i,d)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,j,k,l,m,e),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}();var ATLASENCRPY={decrypt:function(a,b){var c=CryptoJS.AES.decrypt(b,a);return JSON.parse(c.toString(CryptoJS.enc.Utf8))},encrypt:function(a,b){return CryptoJS.AES.encrypt(JSON.stringify(b),a).toString()}};!function(a){var b=Date.now||function(){return+new Date},c=60,d=1e3,e={},f=1;a.core?core.effect||(core.effect={}):a.core={effect:{}},core.effect.Animate={requestAnimationFrame:function(){var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame,c=!!b;if(b&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(b.toString())&&(c=!1),c)return function(a,c){b(a,c)};var d=60,e={},f=0,g=1,h=null,i=+new Date;return function(a,b){var c=g++;return e[c]=a,f++,null===h&&(h=setInterval(function(){var a=+new Date,b=e;e={},f=0;for(var c in b)b.hasOwnProperty(c)&&(b[c](a),i=a);a-i>2500&&(clearInterval(h),h=null)},1e3/d)),c}}(),stop:function(a){var b=null!=e[a];return b&&(e[a]=null),b},isRunning:function(a){return null!=e[a]},start:function(a,g,h,i,j,k){var l=b(),m=l,n=0,o=0,p=f++;if(k||(k=document.body),p%20===0){var q={};for(var r in e)q[r]=!0;e=q}var s=function(f){var q=f!==!0,r=b();if(!e[p]||g&&!g(p))return e[p]=null,void(h&&h(c-o/((r-l)/d),p,!1));if(q)for(var t=Math.round((r-m)/(d/c))-1,u=0;u<Math.min(t,4);u++)s(!0),o++;i&&(n=(r-l)/i,n>1&&(n=1));var v=j?j(n):n;a(v,r,q)!==!1&&1!==n||!q?q&&(m=r,core.effect.Animate.requestAnimationFrame(s,k)):(e[p]=null,h&&h(c-o/((r-l)/d),p,1===n||null==i))};return e[p]=!0,core.effect.Animate.requestAnimationFrame(s,k),p}}}(this);var Scroller;!function(){var a=function(){};Scroller=function(b,c){this.__callback=b.zoom,this.__rotateCallback=b.rotate,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!0,minZoom:1,maxZoom:20,speedMultiplier:1,scrollingComplete:a,movingComplete:a,zoomingComplete:a,penetrationDeceleration:.03,penetrationAcceleration:.08,zoomContent:null,mapContent:null,rotateContent:null};for(var d in c)this.options[d]=c[d]};var b=function(a){return Math.pow(a-1,3)+1},c=function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},d={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__rotateDegree:0,__degrees:null,__lastRotation:0,__rotatePointRate:1,__curPosition:null,__centerPosition:null,setDimensions:function(a,b,c,d){var e=this;a===+a&&(e.__clientWidth=a),b===+b&&(e.__clientHeight=b),c===+c&&(e.__contentWidth=c),d===+d&&(e.__contentHeight=d),e.__computeScrollMax(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},setPosition:function(a,b){var c=this;c.__clientLeft=a||0,c.__clientTop=b||0},setSnapSize:function(a,b){var c=this;c.__snapWidth=a,c.__snapHeight=b},activatePullToRefresh:function(a,b,c,d){var e=this;e.__refreshHeight=a,e.__refreshActivate=b,e.__refreshDeactivate=c,e.__refreshStart=d},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var a=this;a.__refreshActive=!1,a.__refreshDeactivate&&a.__refreshDeactivate(),a.scrollTo(a.__scrollLeft,a.__scrollTop,!0)},getValues:function(){var a=this;return{left:a.__scrollLeft,top:a.__scrollTop,zoom:a.__zoomLevel}},getScrollMax:function(){var a=this;return{left:a.__maxScrollLeft,top:a.__maxScrollTop}},rotateTo:function(a,b,c,d){var e=this;if(!e.options.zooming)throw new Error("Zooming is not enabled!");d&&(e.__zoomComplete=d),e.__isDecelerating&&(core.effect.Animate.stop(e.__isDecelerating),e.__isDecelerating=!1);e.__zoomLevel,e.__zoomLevel;null==b&&(b=0),null==c&&(c=0),e.scrollBy(b,c,!1),e.options.zooming&&(e.__computeScrollMax(),e.__zoomComplete&&(e.__zoomComplete(),e.__zoomComplete=null),e.__onZoomingFunc&&e.__onZoomingFunc()),e.__rotateCallback&&e.options.rotateContent&&e.__rotateCallback(e.options.rotateContent,a)},zoomTo:function(a,b,c,d,e){var f=this;if(!f.options.zooming)throw new Error("Zooming is not enabled!");e&&(f.__zoomComplete=e),f.__isDecelerating&&(core.effect.Animate.stop(f.__isDecelerating),f.__isDecelerating=!1);var g=f.__zoomLevel;null==c&&(c=f.__clientWidth/2),null==d&&(d=f.__clientHeight/2),a=Math.max(Math.min(a,f.options.maxZoom),f.options.minZoom),f.__computeScrollMax(a);var h=(c+f.__scrollLeft)*a/g-c,i=(d+f.__scrollTop)*a/g-d;h>f.__maxScrollLeft?h=f.__maxScrollLeft:0>h&&(h=0),i>f.__maxScrollTop?i=f.__maxScrollTop:0>i&&(i=0),f.__publish(h,i,a,b)},zoomBy:function(a,b,c,d,e){var f=this;f.zoomTo(f.__zoomLevel*a,b,c,d,e)},scrollTo:function(a,b,c,d,e){var f=this;if(f.__isDecelerating&&(core.effect.Animate.stop(f.__isDecelerating),f.__isDecelerating=!1),null!=d&&d!==f.__zoomLevel){if(!f.options.zooming)throw new Error("Zooming is not enabled!");a*=d,b*=d,f.__computeScrollMax(d)}else d=f.__zoomLevel;f.options.scrollingX?f.options.paging?a=Math.round(a/f.__clientWidth)*f.__clientWidth:f.options.snapping&&(a=Math.round(a/f.__snapWidth)*f.__snapWidth):a=f.__scrollLeft,f.options.scrollingY?f.options.paging?b=Math.round(b/f.__clientHeight)*f.__clientHeight:f.options.snapping&&(b=Math.round(b/f.__snapHeight)*f.__snapHeight):b=f.__scrollTop,a=Math.min(f.__maxScrollLeft,a),b=Math.min(f.__maxScrollTop,b),a===f.__scrollLeft&&b===f.__scrollTop&&(c=!1),f.__publish(a,b,d,c,e)},scrollBy:function(a,b,c){var d=this,e=d.__isAnimating?d.__scheduledLeft:d.__scrollLeft,f=d.__isAnimating?d.__scheduledTop:d.__scrollTop;d.scrollTo(e+(a||0),f+(b||0),c)},doMouseZoom:function(a,b,c,d,e){var f,g=this;f=e?e:a>0?-(g.__zoomLevel>2?Math.floor(g.__zoomLevel/2):.5):g.__zoomLevel>2?Math.floor(g.__zoomLevel/2):.5;var h=Math.floor(10*g.__zoomLevel+10*f)/10;return g.zoomTo(h,!1,c-g.__clientLeft,d-g.__clientTop,g.options.scrollingComplete)},doMouseRotate:function(a,b,c,d){var e=this,f=a>0?(e.__rotateDegree+10)%360:(e.__rotateDegree+350)%360;return e.__rotateDegree=+f,e.rotateTo(e.__rotateDegree,null,null,e.options.scrollingComplete)},doRotateStart:function(a,b,c){if(!a)throw new Error("Invalid touch : "+a);if(c instanceof Date&&(c=c.valueOf()),"number"!=typeof c)throw new Error("Invalid timestamp value: "+c);var d=this,e={x:parseInt(a.x+d.__scrollLeft),y:parseInt(a.y+d.__scrollTop)},f={x:parseInt(d.__contentWidth*d.__zoomLevel/2),y:parseInt(d.__contentHeight*d.__zoomLevel/2)};d.__degrees=[],d.__scrollOffsets=[],d.__curPosition=e,d.__centerPosition=f,d.__lastRotation=parseInt(b),d.__degrees.push(d.__lastRotation,c),d.__scrollOffsets.push(0,0,c)},doTouchRotate:function(a){if(null==a.pointers.length)throw new Error("Invalid touch list: "+touches);var b=a.timeStamp;if(b instanceof Date&&(b=b.valueOf()),"number"!=typeof b)throw new Error("Invalid timestamp value: "+b);var c=this,d=a.rotation,e=c.__degrees,f=parseInt(d)-c.__lastRotation;if(!(Math.abs(f)<5)){var g=parseInt(f+c.__rotateDegree)%360,h=function(a,b,c){if(0===c||void 0===c)return b;var d=b.x-a.x,e=b.y-a.y;if(isNaN(d)||isNaN(e))return b;var f=c/180*Math.PI;return{x:+(a.x+Math.cos(f)*d-Math.sin(f)*e).toFixed(3),y:+(a.y+Math.sin(f)*d+Math.cos(f)*e).toFixed(3)}};c.__rotateDegree=+g,e.length>40&&e.splice(0,20),e.push(parseInt(d),b);var i=e.length-2;c.__lastRotation=e[i];var j=h(c.__centerPosition,c.__curPosition,f),k=parseInt(100*(j.x-c.__curPosition.x))/100,l=parseInt(100*(j.y-c.__curPosition.y))/100;return c.__curPosition=j,c.rotateTo(c.__rotateDegree,k,l,c.options.scrollingComplete)}},doTouchStart:function(a,b){if(null==a.length)throw new Error("Invalid touch list: "+a);if(b instanceof Date&&(b=b.valueOf()),"number"!=typeof b)throw new Error("Invalid timestamp value: "+b);var c=this;c.__interruptedAnimation=!0,c.__isDecelerating&&(core.effect.Animate.stop(c.__isDecelerating),c.__isDecelerating=!1,c.__interruptedAnimation=!0),c.__isAnimating&&(core.effect.Animate.stop(c.__isAnimating),c.__isAnimating=!1,c.__interruptedAnimation=!0);var d,e,f=1===a.length;f?(d=a[0].pageX,e=a[0].pageY):(d=Math.abs(a[0].pageX+a[1].pageX)/2,e=Math.abs(a[0].pageY+a[1].pageY)/2),c.__initialTouchLeft=d,c.__initialTouchTop=e,c.__zoomLevelStart=c.__zoomLevel,c.__lastTouchLeft=d,c.__lastTouchTop=e,c.__lastTouchMove=b,c.__lastScale=1,c.__enableScrollX=!f&&c.options.scrollingX,c.__enableScrollY=!f&&c.options.scrollingY,c.__isTracking=!0,c.__didDecelerationComplete=!1,c.__isDragging=!f,c.__isSingleTouch=f,c.__positions=[]},doTouchMove:function(a,b,c){if(null==a.length)throw new Error("Invalid touch list: "+a);if(b instanceof Date&&(b=b.valueOf()),"number"!=typeof b)throw new Error("Invalid timestamp value: "+b);var d=this;if(d.__isTracking){var e,f;2===a.length?(e=Math.abs(a[0].pageX+a[1].pageX)/2,f=Math.abs(a[0].pageY+a[1].pageY)/2):(e=a[0].pageX,f=a[0].pageY);var g=d.__positions;if(d.__isDragging){var h=e-d.__lastTouchLeft,i=f-d.__lastTouchTop,j=d.__scrollLeft,k=d.__scrollTop,l=d.__zoomLevel;if(null!=c&&d.options.zooming){var m=l;if(l=+(l/d.__lastScale*c).toFixed(4),l=Math.max(Math.min(l,d.options.maxZoom),d.options.minZoom),m!==l){var n=e-d.__clientLeft,o=f-d.__clientTop;j=(n+j)*l/m-n,k=(o+k)*l/m-o,d.__computeScrollMax(l)}}if(d.__enableScrollX){j-=h*this.options.speedMultiplier;var p=d.__maxScrollLeft,q=d.__minScrollLeft;(j>p||q>j)&&(d.options.bouncing?j+=h/2*this.options.speedMultiplier:j=j>p?p:q)}if(d.__enableScrollY){k-=i*this.options.speedMultiplier;var r=d.__maxScrollTop,s=d.__minScrollTop;(k>r||s>k)&&(d.options.bouncing?(k+=i/2*this.options.speedMultiplier,d.__enableScrollX||null==d.__refreshHeight||(!d.__refreshActive&&k<=-d.__refreshHeight?(d.__refreshActive=!0,d.__refreshActivate&&d.__refreshActivate()):d.__refreshActive&&k>-d.__refreshHeight&&(d.__refreshActive=!1,d.__refreshDeactivate&&d.__refreshDeactivate()))):k=k>r?r:s)}g.length>60&&g.splice(0,30),g.push(j,k,b),d.__publish(j,k,l,!1)}else{var t=d.options.locking?3:0,u=5,v=Math.abs(e-d.__initialTouchLeft),w=Math.abs(f-d.__initialTouchTop);d.__enableScrollX=d.options.scrollingX&&v>=t,d.__enableScrollY=d.options.scrollingY&&w>=t,g.push(d.__scrollLeft,d.__scrollTop,b),d.__isDragging=(d.__enableScrollX||d.__enableScrollY)&&(v>=u||w>=u),d.__isDragging&&(d.__interruptedAnimation=!1)}d.__lastTouchLeft=e,d.__lastTouchTop=f,d.__lastTouchMove=b,d.__lastScale=c}},doTouchEnd:function(a){if(a instanceof Date&&(a=a.valueOf()),"number"!=typeof a)throw new Error("Invalid timestamp value: "+a);var b=this;if(b.__isTracking){if(b.__isTracking=!1,b.__isDragging)if(b.__isDragging=!1,b.__isSingleTouch&&b.options.animating&&a-b.__lastTouchMove<=100){for(var c=b.__positions,d=c.length-1,e=d,f=d;f>0&&c[f]>b.__lastTouchMove-100;f-=3)e=f;if(e!==d){var g=c[d]-c[e],h=b.__scrollLeft-c[e-2],i=b.__scrollTop-c[e-1];b.__decelerationVelocityX=h/g*(1e3/60),b.__decelerationVelocityY=i/g*(1e3/60);var j=b.options.paging||b.options.snapping?4:1;(Math.abs(b.__decelerationVelocityX)>j||Math.abs(b.__decelerationVelocityY)>j)&&(b.__refreshActive||b.__startDeceleration(a))}}else a-b.__lastTouchMove>100;else b.options.zoomingComplete();b.__isDecelerating||(b.__refreshActive&&b.__refreshStart?(b.__publish(b.__scrollLeft,-b.__refreshHeight,b.__zoomLevel,!0),b.__refreshStart&&b.__refreshStart()):(b.__interruptedAnimation||b.__isDragging,b.scrollTo(b.__scrollLeft,b.__scrollTop,!0,b.__zoomLevel),b.__refreshActive&&(b.__refreshActive=!1,b.__refreshDeactivate&&b.__refreshDeactivate()))),b.__positions.length=0}},__publish:function(a,d,e,f,g){var h=this;g=g||h.options.animationDuration,a=Math.floor(a),d=Math.floor(d),e=e,h.__zoomContent=h.options.mapContent,h.__diffZoom=e-h.__zoomLevel;var i=h.__isAnimating;if(i&&(core.effect.Animate.stop(i),h.__isAnimating=!1),f&&h.options.animating){h.__scheduledLeft=a,h.__scheduledTop=d,h.__scheduledZoom=e;var j=h.__scrollLeft,k=h.__scrollTop,l=h.__zoomLevel,m=a-j,n=d-k,o=e-l,p=function(a,b,c){c&&(h.__scrollLeft=j+m*a,h.__scrollTop=k+n*a,h.__zoomLevel=l+o*a,h.__callback&&h.__zoomContent&&h.__callback(h.__contentWidth,h.__contentHeight,h.__scrollLeft,h.__scrollTop,h.__zoomLevel,h.__zoomContent))},q=function(a){return h.__isAnimating===a},r=function(a,b,c){b===h.__isAnimating&&(h.__isAnimating=!1),(h.__didDecelerationComplete||c)&&h.options.scrollingComplete(),h.options.zooming&&(h.__computeScrollMax(),h.__zoomComplete&&(h.__zoomComplete(),h.options.zoomingComplete(),h.__zoomComplete=null),h.__onZoomingFunc&&h.__onZoomingFunc())};h.__isAnimating=core.effect.Animate.start(p,q,r,g,i?b:c)}else h.__scheduledLeft=h.__scrollLeft=a,h.__scheduledTop=h.__scrollTop=d,h.__scheduledZoom=h.__zoomLevel=e,h.__callback&&h.__zoomContent&&h.__callback(h.__contentWidth,h.__contentHeight,a,d,h.__zoomLevel,h.__zoomContent),h.options.zooming&&(h.__computeScrollMax(),h.__zoomComplete&&(h.__zoomComplete(),h.options.zoomingComplete(),h.__zoomComplete=null),h.__onZoomingFunc&&h.__onZoomingFunc())},__computeScrollMax:function(a){var b=this;null==a&&(a=b.__zoomLevel),b.__maxScrollLeft=Math.max(b.__contentWidth*a-b.__clientWidth,0),b.__maxScrollTop=Math.max(b.__contentHeight*a-b.__clientHeight,0)},__startDeceleration:function(a){var b=this;if(b.options.paging){var c=Math.max(Math.min(b.__scrollLeft,b.__maxScrollLeft),0),d=Math.max(Math.min(b.__scrollTop,b.__maxScrollTop),0),e=b.__clientWidth,f=b.__clientHeight;b.__minDecelerationScrollLeft=Math.floor(c/e)*e,b.__minDecelerationScrollTop=Math.floor(d/f)*f,b.__maxDecelerationScrollLeft=Math.ceil(c/e)*e,b.__maxDecelerationScrollTop=Math.ceil(d/f)*f}else b.__minDecelerationScrollLeft=0,b.__minDecelerationScrollTop=0,b.__maxDecelerationScrollLeft=b.__maxScrollLeft,b.__maxDecelerationScrollTop=b.__maxScrollTop;var g=function(a,c,d){b.__stepThroughDeceleration(d)},h=b.options.snapping?4:.1,i=function(){var a=Math.abs(b.__decelerationVelocityX)>=h||Math.abs(b.__decelerationVelocityY)>=h;return a||(b.__didDecelerationComplete=!0),a},j=function(a,c,d){b.__isDecelerating=!1,b.__didDecelerationComplete&&b.options.movingComplete(),b.scrollTo(b.__scrollLeft,b.__scrollTop,b.options.snapping)};b.__isDecelerating=core.effect.Animate.start(g,i,j)},__stepThroughDeceleration:function(a){var b=this,c=b.__scrollLeft+b.__decelerationVelocityX,d=b.__scrollTop+b.__decelerationVelocityY;if(!b.options.bouncing){var e=Math.max(Math.min(b.__maxDecelerationScrollLeft,c),b.__minDecelerationScrollLeft);e!==c&&(c=e,b.__decelerationVelocityX=0);var f=Math.max(Math.min(b.__maxDecelerationScrollTop,d),b.__minDecelerationScrollTop);f!==d&&(d=f,b.__decelerationVelocityY=0)}if(a?b.__publish(c,d,b.__zoomLevel):(b.__scrollLeft=c,b.__scrollTop=d),!b.options.paging){var g=.95;b.__decelerationVelocityX*=g,b.__decelerationVelocityY*=g}if(b.options.bouncing){var h=0,i=0,j=b.options.penetrationDeceleration,k=b.options.penetrationAcceleration;c<b.__minDecelerationScrollLeft?h=b.__minDecelerationScrollLeft-c:c>b.__maxDecelerationScrollLeft&&(h=b.__maxDecelerationScrollLeft-c),d<b.__minDecelerationScrollTop?i=b.__minDecelerationScrollTop-d:d>b.__maxDecelerationScrollTop&&(i=b.__maxDecelerationScrollTop-d),0!==h&&(h*b.__decelerationVelocityX<=0?b.__decelerationVelocityX+=h*j:b.__decelerationVelocityX=h*k),0!==i&&(i*b.__decelerationVelocityY<=0?b.__decelerationVelocityY+=i*j:b.__decelerationVelocityY=i*k)}}};for(var e in d)Scroller.prototype[e]=d[e]}(),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e,f;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a);else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0,g=e.length;g>f;f++)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]);return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ha?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0,e=a.length;e>d;d++)if(c&&a[d][c]==b||!c&&a[d]===b)return d;return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0,g=a.length;g>f;f++){var h=b?a[f][b]:a[f];s(e,h)<0&&d.push(a[f]),e[f]=h}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0,h=fa.length;h>g;g++)if(c=fa[g],e=c?c+f:b,e in a)return e;return d}function w(){return la++}function x(b,c){var d=this;this.manager=b,this.callback=c,this.element=b.element,this.target=b.options.inputTarget,this.domHandler=function(a){l(b.options.enable,[b])&&d.handler(a)},this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(a,this.evWin,this.domHandler)}function y(a){var b;return new(b=oa?M:pa?N:na?P:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&va&&d-e===0,g=b&(xa|ya)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ka(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY),b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,C(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===va||f.eventType===xa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=ya&&(i>ua||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=F(i,j,k);
e=l.x,f=l.y,c=ja(l.x)>ja(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;c++)b[c]={clientX:ia(a.pointers[c].clientX),clientY:ia(a.pointers[c].clientY)};return{timeStamp:ka(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:ia(a[0].clientX),y:ia(a[0].clientY)};for(var c=0,d=0,e=0;b>e;e++)c+=a[e].clientX,d+=a[e].clientY;return{x:ia(c/b),y:ia(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?za:ja(a)>=ja(b)?a>0?Aa:Ba:b>0?Ca:Da}function H(a,b,c){c||(c=Ha);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Ha);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ia)-I(a[1],a[0],Ia)}function K(a,b){return H(b[0],b[1],Ia)/H(a[0],a[1],Ia)}function L(){this.evEl=Ka,this.evWin=La,this.allow=!0,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Oa,this.evWin=Pa,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Ra,this.targetIds={},x.apply(this,arguments)}function O(a,b){var c=t(a.touches),d=this.targetIds;if(b&(va|wa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.targetTouches),h=t(a.changedTouches),i=[];if(b===va)for(e=0,f=g.length;f>e;e++)d[g[e].identifier]=!0;for(e=0,f=h.length;f>e;e++)d[h[e].identifier]&&i.push(h[e]),b&(xa|ya)&&delete d[h[e].identifier];return i.length?[u(g.concat(i),"identifier",!0),i]:void 0}function P(){x.apply(this,arguments);var a=k(this.handler,this);this.touch=new N(this.manager,a),this.mouse=new L(this.manager,a)}function Q(a,b){this.manager=a,this.set(b)}function R(a){if(q(a,Xa))return Xa;var b=q(a,Ya),c=q(a,Za);return b&&c?Ya+" "+Za:b||c?b?Ya:Za:q(a,Wa)?Wa:Va}function S(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=$a,this.simultaneous={},this.requireFail=[]}function T(a){return a&db?"cancel":a&bb?"end":a&ab?"move":a&_a?"start":""}function U(a){return a==Da?"down":a==Ca?"up":a==Aa?"left":a==Ba?"right":""}function V(a,b){var c=b.manager;return c?c.get(a):a}function W(){S.apply(this,arguments)}function X(){W.apply(this,arguments),this.pX=null,this.pY=null}function Y(){W.apply(this,arguments)}function Z(){S.apply(this,arguments),this._timer=null,this._input=null}function $(){W.apply(this,arguments)}function _(){W.apply(this,arguments)}function aa(){S.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ba(a,b){return b=b||{},b.recognizers=m(b.recognizers,ba.defaults.preset),new ca(a,b)}function ca(a,b){b=b||{},this.options=i(b,ba.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=y(this),this.touchAction=new Q(this,this.options.touchAction),da(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[2])},this)}function da(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ea(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var fa=["","webkit","moz","MS","ms","o"],ga=b.createElement("div"),ha="function",ia=Math.round,ja=Math.abs,ka=Date.now,la=1,ma=/mobile|tablet|ip(ad|hone|od)|android/i,na="ontouchstart"in a,oa=v(a,"PointerEvent")!==d,pa=na&&ma.test(navigator.userAgent),qa="touch",ra="pen",sa="mouse",ta="kinect",ua=25,va=1,wa=2,xa=4,ya=8,za=1,Aa=2,Ba=4,Ca=8,Da=16,Ea=Aa|Ba,Fa=Ca|Da,Ga=Ea|Fa,Ha=["x","y"],Ia=["clientX","clientY"];x.prototype={handler:function(){},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(a,this.evWin,this.domHandler)}};var Ja={mousedown:va,mousemove:wa,mouseup:xa},Ka="mousedown",La="mousemove mouseup";j(L,x,{handler:function(a){var b=Ja[a.type];b&va&&0===a.button&&(this.pressed=!0),b&wa&&1!==a.which&&(b=xa),this.pressed&&this.allow&&(b&xa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:sa,srcEvent:a}))}});var Ma={pointerdown:va,pointermove:wa,pointerup:xa,pointercancel:ya,pointerout:ya},Na={2:qa,3:ra,4:sa,5:ta},Oa="pointerdown",Pa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Oa="MSPointerDown",Pa="MSPointerMove MSPointerUp MSPointerCancel"),j(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Ma[d],f=Na[a.pointerType]||a.pointerType,g=f==qa;e&va&&(0===a.button||g)?b.push(a):e&(xa|ya)&&(c=!0);var h=s(b,a.pointerId,"pointerId");0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Qa={touchstart:va,touchmove:wa,touchend:xa,touchcancel:ya},Ra="touchstart touchmove touchend touchcancel";j(N,x,{handler:function(a){var b=Qa[a.type],c=O.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:qa,srcEvent:a})}}),j(P,x,{handler:function(a,b,c){var d=c.pointerType==qa,e=c.pointerType==sa;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(xa|ya)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Sa=v(ga.style,"touchAction"),Ta=Sa!==d,Ua="compute",Va="auto",Wa="manipulation",Xa="none",Ya="pan-x",Za="pan-y";Q.prototype={set:function(a){a==Ua&&(a=this.compute()),Ta&&(this.manager.element.style[Sa]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),R(a.join(" "))},preventDefaults:function(a){if(!Ta){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,Xa),f=q(d,Za),g=q(d,Ya);return e||f&&g||f&&c&Ea||g&&c&Fa?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var $a=1,_a=2,ab=4,bb=8,cb=bb,db=16,eb=32;S.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=V(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=V(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=V(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=V(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?T(d):""),a)}var c=this,d=this.state;bb>d&&b(!0),b(),d>=bb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=eb)},canEmit:function(){for(var a=0;a<this.requireFail.length;a++)if(!(this.requireFail[a].state&(eb|$a)))return!1;return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(cb|db|eb)&&(this.state=$a),this.state=this.process(b),void(this.state&(_a|ab|bb|db)&&this.tryEmit(b))):(this.reset(),void(this.state=eb))},process:function(){},getTouchAction:function(){},reset:function(){}},j(W,S,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(_a|ab),e=this.attrTest(a);return d&&(c&ya||!e)?b|db:d||e?c&xa?b|bb:b&_a?b|ab:_a:eb}}),j(X,W,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ga},getTouchAction:function(){var a=this.options.direction;if(a===Ga)return[Xa];var b=[];return a&Ea&&b.push(Za),a&Fa&&b.push(Ya),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ea?(e=0===f?za:0>f?Aa:Ba,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?za:0>g?Ca:Da,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return W.prototype.attrTest.call(this,a)&&(this.state&_a||!(this.state&_a)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=U(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(Y,W,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&_a)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(Z,S,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Va]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(xa|ya)&&!f)this.reset();else if(a.eventType&va)this.reset(),this._timer=e(function(){this.state=cb,this.tryEmit()},b.time,this);else if(a.eventType&xa)return cb;return eb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===cb&&(a&&a.eventType&xa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ka(),this.manager.emit(this.options.event,this._input)))}}),j($,W,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xa]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&_a)}}),j(_,W,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ea|Fa,pointers:1},getTouchAction:function(){return X.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ea|Fa)?b=a.velocity:c&Ea?b=a.velocityX:c&Fa&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&ja(b)>this.options.velocity&&a.eventType&xa},emit:function(a){var b=U(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(aa,S,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Wa]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&va&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=xa)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=cb,this.tryEmit()},b.interval,this),_a):cb}return eb},failTimeout:function(){return this._timer=e(function(){this.state=eb},this.options.interval,this),eb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==cb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ba.VERSION="2.0.2",ba.defaults={domEvents:!1,touchAction:Ua,inputTarget:null,enable:!0,preset:[[$,{enable:!1}],[Y,{enable:!1},["rotate"]],[_,{direction:Ea}],[X,{direction:Ea},["swipe"]],[aa],[aa,{event:"doubletap",taps:2},["tap"]],[Z]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var fb=1,gb=2;ca.prototype={set:function(a){return h(this.options,a),this},stop:function(a){this.session.stopped=a?gb:fb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&cb)&&(e=b.curRecognizer=null);for(var f=0,g=d.length;g>f;f++)c=d[f],b.stopped===gb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(_a|ab|bb)&&(e=b.curRecognizer=c)}},get:function(a){if(a instanceof S)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ea(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0,e=c.length;e>d;d++)c[d](b)}},destroy:function(){this.element&&da(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ba,{INPUT_START:va,INPUT_MOVE:wa,INPUT_END:xa,INPUT_CANCEL:ya,STATE_POSSIBLE:$a,STATE_BEGAN:_a,STATE_CHANGED:ab,STATE_ENDED:bb,STATE_RECOGNIZED:cb,STATE_CANCELLED:db,STATE_FAILED:eb,DIRECTION_NONE:za,DIRECTION_LEFT:Aa,DIRECTION_RIGHT:Ba,DIRECTION_UP:Ca,DIRECTION_DOWN:Da,DIRECTION_HORIZONTAL:Ea,DIRECTION_VERTICAL:Fa,DIRECTION_ALL:Ga,Manager:ca,Input:x,TouchAction:Q,Recognizer:S,AttrRecognizer:W,Tap:aa,Pan:X,Swipe:_,Pinch:Y,Rotate:$,Press:Z,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ha&&define.amd?define(function(){return ba}):"undefined"!=typeof module&&module.exports?module.exports=ba:a[c]=ba}(window,document,"Hammer"),window.AtlasUtils=window.AtlasUtils||{},function(utils){var pathId=0;utils.getNavPathId=function(){return++pathId,pathId>1e3&&(pathId=0),pathId},utils.addAtlasEventLister=function(a,b,c){var d=a;d.events?(d.events[b]&&a.removeEventListener(b,d.events[b]),d.events[b]=c,a.addEventListener(b,d.events[b],!1)):(d.events={},d.events[b]=c,a.addEventListener(b,d.events[b],!1))},utils.requestAnimFrame=function(a){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)})(a)},AtlasUtils.JsonpCallers={};var callerId=0;utils.jsonpCall=function(a,b,c){if(b=b||function(){},c=c||function(){},!a)return b(null),void c({err:"Invalid url."});var d=a.indexOf("?")>-1?"&":"?",e=document.createElement("script"),f="AtlasCallback_"+(new Date).getTime()+"_"+callerId;++callerId,callerId>1e3&&(callerId=0),e.setAttribute("id",f),document.body.appendChild(e),AtlasUtils.JsonpCallers[f]=function(a){try{document.body.removeChild(e)}catch(c){document.body.removeChild(document.getElementById(f)),console.log(c)}delete AtlasUtils.JsonpCallers[f],b(a?"succeed"==a.result?a.data:"failed"==a.result?null:a:null)},e.setAttribute("src",a+d+"callback=AtlasUtils.JsonpCallers."+f),e.onerror=function(){c({err:1})}};var _upsertStyle=function(a){var b=arguments[1]||this;if(b.style){if(!(a&&a instanceof Object))return console.warn("Invalid param.");var c=Object.keys(a),d=c.length;if(0!=d)if(void 0!==b.style.cssText){for(var e=b.style.cssText||"",f=0;d>f;++f)if(c[f]&&a[c[f]]){var g=c[f]+": "+a[c[f]]+";";if(e){if(e.indexOf(g)>-1)continue;var h=new RegExp(c[f]+"[^;]+;?").exec(e);h&&(e=e.replace(new RegExp(c[f]+"[^;]+;?","gi"),""))}e+=g}e!=b.style.cssText&&(b.style.cssText=e)}else console.warn('Navigation unsupport "style.cssText"')}},DOMextend=function(name,fn){if(document.all){var _createElement=document.createElement;document.createElement=function(tag){var _elem=_createElement(tag);return eval("_elem."+name+"=fn"),_elem}}else eval("HTMLElement.prototype."+name+"=fn")};DOMextend("_upsertStyle",_upsertStyle),utils._upsertStyle=_upsertStyle,utils.getDomXY=function(a){var b=0,c=0;if(a.getBoundingClientRect){var d=a.getBoundingClientRect(),e=document.documentElement;b=d.left+Math.max(e.scrollLeft,document.body.scrollLeft)-e.clientLeft,c=d.top+Math.max(e.scrollTop,document.body.scrollTop)-e.clientTop}else for(;a!=document.body;b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent);return{x:Math.floor(b),y:Math.floor(c)}}}(window.AtlasUtils);var _upsertStyle=function(a){var b=arguments[1]||this;if(b.style){if(!(a&&a instanceof Object))return console.warn("Invalid param.");var c=Object.keys(a),d=c.length;if(0!=d)if(void 0!==b.style.cssText){for(var e=b.style.cssText||"",f=0;d>f;++f)if(c[f]&&a[c[f]]){var g=c[f]+": "+a[c[f]]+";";if(e){if(e.indexOf(g)>-1)continue;var h=new RegExp(c[f]+"[^;]+;?").exec(e);h&&(e=e.replace(new RegExp(c[f]+"[^;]+;?","gi"),""))}e+=g}e!=b.style.cssText&&(b.style.cssText=e)}else console.warn('Navigation unsupport "style.cssText"')}},DOMextend=function(name,fn){if(document.all){var _createElement=document.createElement;document.createElement=function(tag){var _elem=_createElement(tag);return eval("_elem."+name+"=fn"),_elem};var _getElementById=document.getElementById;document.getElementById=function(id){var _elem=_getElementById(id);return eval("_elem."+name+"=fn"),_elem}}else eval("HTMLElement.prototype."+name+"=fn")};DOMextend("_upsertStyle",_upsertStyle);var render=function(a){var b,c=document.documentElement.style;a.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?b="presto":"MozAppearance"in c?b="gecko":"WebkitAppearance"in c?b="webkit":"string"==typeof navigator.cpuClass&&(b="trident");var d={trident:"-ms",gecko:"-moz",webkit:"-webkit",presto:"-o"}[b],e=d+"-transform",f=d+"-transform-origin",g=0;return{zoom:function(a,b,c,d,e,f){var h={"margin-left":c?-c+"px":"","margin-top":d?-d+"px":""};g!==e&&(g=e,h.width=Math.floor(a*e)+"px",h.height=Math.floor(b*e)+"px"),f._upsertStyle(h)},rotate:function(a,b){var c={};c[e]="rotate("+b+"deg)",c[f]="50% 50%",a._upsertStyle(c)}}}(this),eventHandler=function(a,b,c){var d=navigator.userAgent,e=(navigator.appVersion,d.indexOf("Android")>-1||d.indexOf("Linux")>-1),f=!!d.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),g="pc";e?g="android":f&&(g="ios");var h=new Hammer.Manager(b),i=new Hammer.Pinch,j=new Hammer.Rotate,k=new Hammer.Pan,l=new Hammer.Tap,m=!1,n=!1,o=!1;i.recognizeWith(j),h.add([i,j,k,l]),"ontouchstart"in window&&h.on("tap",function(b){b.preventDefault&&b.preventDefault();var d=b.tapCount;2==d?(a.doMouseZoom(-1,b.timeStamp,b.pointers[0].pageX,b.pointers[0].pageY,1),c.__isPoiHidden=!1,c._setFontDivSize(),c._updateCoreSvg()):1==d&&c._layerEventHandler(b.target)}),"android"==g?(h.on("panstart",function(b){b.preventDefault&&b.preventDefault(),a.doTouchStart(b.pointers,b.timeStamp)}),h.on("panmove",function(b){b.preventDefault&&b.preventDefault(),a.doTouchMove(b.pointers,b.timeStamp)}),h.on("panend",function(b){b.preventDefault&&b.preventDefault(),a.doTouchEnd(b.timeStamp)}),h.on("pinchstart rotatestart",function(b){b.preventDefault&&b.preventDefault(),c._hiddenPoiDiv(),m=!0,"pinchstart"!=b.type||o||a.doTouchStart(b.pointers,b.timeStamp),"rotatestart"==b.type&&a.doRotateStart(b.center,b.rotation,b.timeStamp)}),h.on("pinchmove rotatemove",function(b){if(b.preventDefault&&b.preventDefault(),"pinchmove"!=b.type||o||(a.doTouchMove(b.pointers,b.timeStamp,b.scale),c._updateCoreSvg()),"rotatemove"==b.type){var d=Math.abs(b.rotation);d>10&&(o=!0),a.doTouchRotate(b)}})):"ios"==g?(h.on("rotatestart",function(b){b.preventDefault&&b.preventDefault(),c._hiddenPoiDiv(),m=!0,a.doRotateStart(b.center,b.rotation,b.timeStamp)}),h.on("rotatemove",function(b){b.preventDefault&&b.preventDefault();var c=Math.abs(b.rotation);c>10&&(n=!0,a.doTouchRotate(b))}),h.on("rotateend",function(b){b.preventDefault&&b.preventDefault(),n=!1,a.doTouchEnd(b.timeStamp),c.__isPoiHidden=!1,c._setFontDivSize(),c._updateCoreSvg()}),b.addEventListener("touchstart",function(b){b.preventDefault&&b.preventDefault(),b.timeStamp||(b.timeStamp=(new Date).getTime()),n||(2==b.touches.length&&(c._hiddenPoiDiv(),m=!0),b.touches[0]&&b.touches[0].target&&b.touches[0].target.tagName.match(/input|textarea|select/i)||a.doTouchStart(b.touches,b.timeStamp))},!1),b.addEventListener("touchmove",function(b){b.preventDefault&&b.preventDefault(),b.timeStamp||(b.timeStamp=(new Date).getTime()),n||(1==b.touches.length?a.doTouchMove(b.touches,b.timeStamp):2==b.touches.length&&(a.doTouchMove(b.touches,b.timeStamp,b.scale),c._updateCoreSvg()))})):(h.on("panstart",function(b){b.preventDefault&&b.preventDefault(),a.doTouchStart(b.pointers,b.timeStamp)}),h.on("panmove",function(b){b.preventDefault&&b.preventDefault(),a.doTouchMove(b.pointers,b.timeStamp)}),h.on("panend",function(b){b.preventDefault&&b.preventDefault(),a.doTouchEnd(b.timeStamp)})),b.addEventListener("touchend",function(b){b.preventDefault&&b.preventDefault(),b.timeStamp||(b.timeStamp=(new Date).getTime()),a.doTouchEnd(b.timeStamp),n=!1,o=!1,m&&(m=!1,c.__isPoiHidden=!1,c._setFontDivSize(),c._updateCoreSvg())},!1),b.addEventListener("touchcancel",function(b){b.preventDefault&&b.preventDefault(),n=!1,o=!1,m=!1,b.timeStamp||(b.timeStamp=(new Date).getTime()),a.doTouchEnd(b.timeStamp),c.__isPoiHidden=!1,c._setFontDivSize(),c._updateCoreSvg()},!1),"onclick"in window&&b.addEventListener(navigator.userAgent.indexOf("Firefox")>-1?"DOMMouseScroll":"mousewheel",function(b){b.preventDefault&&b.preventDefault();var d=b.detail?120*b.detail:-b.wheelDelta;a.doMouseZoom(d,b.timeStamp,b.pageX,b.pageY,null),c.__isPoiHidden=!1,c._setFontDivSize(),c._updateCoreSvg()},!1)},Atlas;!function(){Atlas=function(a){var b=this;b._setMembers(),b._initOptions(a),b._initData(),b._initDom(),b._initScroller(),b._bufferUIStart()};var p=Atlas.prototype;p._initialize=function(){var a=this;a._entityModel(),a._resetMap(),a._getFloorUI(),a._bufferUIStop();var b=setTimeout(function(){a.options.initMarkPoi&&a.moveToPoiId(a.options.initMarkPoi,!0),a.options.enCacheData===!0&&a.cacheMapData(),a.options.initCallback(),a._floorCallback(),clearTimeout(b)},500)},p._setMembers=function(){var a=this,b={zoomLevel:1,geoRotation:0,initDegree:{},floorObj:{},floorKeys:{},svg:{floors:{}},curFloor:null,curFloorId:null,__pathSymbol:"➛ ",__svgPaddingTop:0,__svgPaddingLeft:0,__drawScale:1,__navRunningId:0,__navigation:null,__fences:{},__sidPaths:{},__lastNavCoord:{},__sidEntity:{},__mapZIndex:{path:1,nav:2,poi:4,tagImg:4,tag:5,info:6,img:7},__deviceType:function(){var a=navigator.userAgent,b=(navigator.appVersion,a.indexOf("Android")>-1||a.indexOf("Linux")>-1),c=!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),d="pc";return b?d="android":c&&(d="ios"),d}(),_strRepeat:function(a,b){return new Array(b+1).join(a)}};for(var c in b)a[c]=b[c];a.__tagPath="data:image/png;base64,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",a.__navStartTag="data:image/png;base64,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",a.__navEndTag="data:image/png;base64,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",
a.__compassImg="data:image/png;base64,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",a.__navArrowImg="data:image/png;base64,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",a.__navArrowImg1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADG0lEQVRYR81XXU4aYRQ9F/8epUmFNHGQrkBcgbgDm3TmVVxBcQXiCsQVSF+hiXYF4gpKV1AKJg2jiTT1pQJzmm+GjwwwI8NIa79HmHvvuef+C57x0tV2WYl3LKMYV43EFVRy6Wq7PgSQj6snFoDXtXZ+CVwH4TIAQXFA6d5ZxvW8QCIDSH1q7cORAwjzAkmS/CmQhjJIMCci6wS7oNQdwdmdabjszHozAXje4hhAnuBHCC7t95nLIMUuSGJfIAcA6gPgZBaQJwFsVG8KCeG5Mvy4vFLqvnvTnOWR+j958SO72u+VFBCHcnhrbVbC5EIBpGqtylMKXGaIbaV4ADSC4j9ygKzYVuYwCEQgAC3oUHZurU03zuopowniVAS5IGUkGo7gyE/7RvUmlxB+CWNiCsAw5leTAm7NCz5ECYEDlm/NzJH+Vjs0APYmc2IKgKptCpu2mSl48bxPrvYersK8DgOk2LAtY0f/PwzpVsc09vwyYwBUFgvl4vfy8ludcPN4PgWGONNdUiXmWr//bZKFcQC1liqvrvZehyMK7WHf+A0qFhSptpnZ19+PA6i2ukigoOs8VW03RLxMj/v8oRj2iXPbzLyaAqC97ZjGCFS61mZcw345rVPl01r/4d7PysiY12qh6jWpS24JuFoEgLEwTLAswyTbBpkF5HvHMtzJlq7dFAGeLgIAIEcdc9MdXN4E5RZEmg7Y8AAAOQiyIJr/BMDQFoDGeAiIUYIsogI0e0+GwN9mVcxfLAkVkNTfKcOvtmW4s2My0dVv/1cj0nFfVCsmcGKbRsmbKRFasS4T/zDyQjN/RyQxot7VofYLSlZXWWAr9jeg54xjv+dKZ9h+MZUDGtWMhaQcNh+U146g+KyFRIOItJJB3OwegI2g5dO/U+oJO9lZoy2lZOVxZeVkrqW01zsWkULspXSsQRElCHZJVkRw2TEznyc98Sbdr12qtVykAOLagRT9O2XQXJl5F/iBJMAiiLw+QsYOk+GxAkHdgZRn3QOhVRBl+rnbsTApFHfCUVh01GkW8Rry24jMQBCwFztONZhFnOd/ANjoGqRP3RF6AAAAAElFTkSuQmCC"},p._initOptions=function(a){var b=this;if(void 0===a.width)throw new Error('Options "width" must.');if(void 0===a.height)throw new Error('Options "height" must.');if(void 0===a.floorList)throw new Error('Options "floorList" must.');if(!(a.floorList instanceof Array))throw new Error('Options "floorList" must be an array.');if(void 0===a.mapDiv)throw new Error('Options "mapDiv" must.');b.options={initFloor:"Floor1",initMarkPoi:null,logoInit:!0,enFloorUI:!0,enFacUI:!0,enBufferUI:!0,enCacheData:!0,serverHost:"ap.atlasyun.com",maxZoom:20,minZoom:.5,initZoom:1,initCallback:function(){},poiClick:function(){},layerClick:function(){},netError:function(){}};for(var c in a)b.options[c]=a[c];b.options.minZoom=Math.max(.5,+b.options.minZoom);var d;a.floorList.forEach(function(a){var c=Object.keys(a)[0];b.floorObj[c]=a[c],void 0!==a.deg&&(b.initDegree[c]=isNaN(a.deg)?0:Math.floor(+a.deg)),b.floorKeys[a[c]]=c,void 0===d&&(d=a[c])}),b.initFloorId=b.floorObj[b.options.initFloor]||d},p._setTransformPrefixByEngine=function(){var a,b=this,c=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?a="presto":"MozAppearance"in c?a="gecko":"WebkitAppearance"in c?a="webkit":"string"==typeof navigator.cpuClass&&(a="trident"),b.__vendorPrefix={trident:"-ms",gecko:"-moz",webkit:"-webkit",presto:"-o"}[a],b.__stylePrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[a]},p._floorUICreateInRoot=function(){var a=this;if(a.options.enFloorUI)try{a._createFloorUI()}catch(b){console.log('Error: enFloorUI require file "atlasSdk.ui.js"!')}},p._getFloorUI=function(){var a=this;if(a.options.enFloorUI)try{a._setFloorUI()}catch(b){console.log(b),console.log('Error: enFloorUI require file "atlasSdk.ui.js"!')}},p._bufferUIStart=function(){var a=this;if(a.options.enBufferUI)try{a._buffering()}catch(b){console.log('Error: enBufferUI require file "atlasSdk.ui.js"!')}},p._bufferUIStop=function(){var a=this;if(a.options.enBufferUI)try{a._stopBuffering()}catch(b){console.log('Error: enBufferUI require file "atlasSdk.ui.js"!')}},p._getFacUI=function(){var a=this;if(a.options.enFacUI)try{a._setFacUI()}catch(b){console.log('Error: enFacUI require file "atlasSdk.ui.js"!')}},p._initDom=function(){var a=this,b=document.getElementById(a.options.mapDiv);for(b.innerHTML="";b.hasChildNodes();)b.removeChild(b.firstChild);var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","g");h.appendChild(i),e.appendChild(h),e.appendChild(f),d.appendChild(e),c.appendChild(d),c.appendChild(g),b.appendChild(c),b._upsertStyle({width:a.options.width+"px",height:a.options.height+"px"}),c._upsertStyle({width:a.options.width+"px",height:a.options.height+"px",position:"relative"}),g._upsertStyle({cursor:"pointer",position:"absolute",width:"32px",height:"32px",top:"8px",left:"10px","border-radius":"32px","over-flow":"hidden",opacity:"0.8",background:'url("'+a.__compassImg+'") no-repeat  -4px -4px / 40px 40px;'}),a.atlasDiv=b,a.zoomDiv=c,a.mapDiv=d,a.rotateDiv=e,a.textDiv=f,a.svgDom=h,a.gDom=i,a.compassDiv=g,a._floorUICreateInRoot(),a._getFacUI(),a._logoInit(),a._zoomBoundary={minX:0,minY:0,maxX:a.options.width,maxY:a.options.height}},p._logoInit=function(){var a=this;if(a.options.logoInit){var b=document.createElement("div");a.zoomDiv.appendChild(b);var c="data:image/jpeg;base64,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",d=a.options.logoInit.url||c,e=a.options.logoInit.size||50,f=e,g=a.options.logoInit.height||.4*e,h=a.options.logoInit.opacity||.5;b._upsertStyle({position:"absolute",width:f+"px",height:g+"px",bottom:"5px",left:"5px",opacity:h,background:'url("'+d+'") no-repeat 0 0 / '+f+"px "+g+"px"})}},p._initData=function(){var a=this;a._getFloorData(a.initFloorId,function(b){b?a._initialize():console.log("There is no map data!")})},p._stopExec=function(){var a=this,b=!1;if(a.__floorData&&a.__floorData[6]&&a.__floorData[7]?(a.__floorData[6].length<=0||a.__floorData[7].length<=0)&&(b=!0):b=!0,b){var c=document.createElement("div");c.innerHTML="地图数据无效或不合法！",c.setAttribute("style","z-index:999;text-align: center;line-height:300px;background-color:#FFF;bold:weight;color:#FF0000;position:absolute;top:0;left:0;width:100%;height:100%;"),a.zoomDiv.appendChild(c),a.msgDiv=c}},p._clearMsgDiv=function(){var a=this;if(a.msgDiv)try{a.zoomDiv.removeChild(a.msgDiv)}catch(b){}},p._floorCallback=function(){var a=this,b=a.options.floorChange||function(){};b(a.curFloor)},p._getFloorData=function(a,b){var c,d=this;document.createElement("script");c=d.options.apiUrl?d.options.apiUrl+"?id=":"http://"+d.options.serverHost+"/poi/map/floor/getSimple?id=";var e=c+a;AtlasUtils.jsonpCall(e,function(c){if(c){var e=ATLASENCRPY.decrypt("ap.atlasyun.com",c);d.__floorData=e,d.curFloor=d.floorKeys[a]||e[1]||"Floor?",d.curFloorId=a,b(!0)}else d.__floorData=null,b(null)},function(){throw alert("请检查网络！"),d.options.netError(),new Error("Ajax failed.")})},p._initScroller=function(){var a=this,b={minZoom:a.options.minZoom,maxZoom:a.options.maxZoom,onCompleteFunc:function(){},zoomedFunc:function(){(a.options.mapZoomed||function(){})()},movedFunc:function(){(a.options.mapMoved||function(){})()}};a.scroller=new Scroller(render,{animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,zooming:!0,scrollingX:!0,scrollingY:!0,minZoom:b.minZoom||1,maxZoom:b.maxZoom||20,speedMultiplier:1,scrollingComplete:b.onCompleteFunc,movingComplete:b.movedFunc,zoomingComplete:b.zoomedFunc,penetrationDeceleration:.03,penetrationAcceleration:.08,zoomContent:this.zoomDiv,mapContent:this.mapDiv,rotateContent:this.rotateDiv}),a.scroller.__onZoomingFunc=function(){};var c=this.textDiv;eventHandler(a.scroller,c,this)},p._entityModel=function(){var a=this,b=a.__floorData;a._setTransformPrefixByEngine(),a._markAction=function(b){var c,d;b.className.indexOf("atlas-shop")>-1?(d=(b.getAttribute("coordinate")||"-1&-1").split("&"),c={id:b.getAttribute("poiId"),name:b.innerText||b.textContent,x:+d[0],y:+d[1]},a.options.poiClick(c)):b.className.indexOf("atlas-fac")>-1?(d=(b.getAttribute("coordinate")||"-1&-1").split("&"),c={id:b.getAttribute("facId"),name:b.getAttribute("title"),x:+d[0],y:+d[1]},a.options.poiClick(c)):b.className.indexOf("atlas-txt")>-1&&(d=(b.getAttribute("coordinate")||"-1&-1").split("&"),c={id:null,name:b.innerText||b.textContent,x:+d[0],y:+d[1]},a.options.poiClick(c))},a.compassDiv.addEventListener("ontouchstart"in window?"touchend":"mouseup",function(b){a._initRotate(),a._updateTags()}),a._setFloorJSON(b),a.icons=["atlas-mom-baby","atlas-lift","atlas-stairs","atlas-escalator","atlas-gate","atlas-question-down","atlas-cashier-desk","atlas-parking","atlas-toilet","atlas-toilet-man","atlas-toilet-woman","atlas-vip-service","atlas-handicapped","atlas-taxi","atlas-ticket-service","atlas-metro","atlas-atm"],a.prods=["atlas-eat","atlas-drink","atlas-play","atlas-household","atlas-life-service","atlas-food","atlas-child-product","atlas-clothing-ornament","atlas-menswear","atlas-womenswear","atlas-sport-leisure","atlas-bag-accessory","atlas-cosmetic","atlas-electrical-equipment","atlas-digital-product","atlas-furniture","atlas-stationery","atlas-jewellery","atlas-clock-glass","atlas-meeting","atlas-sale","atlas-other"],a._filterData={},a._filtered={},a._filterDistance={},a._filterScale={},a._mapDataForEmphasizeMark=null},p._setFloorJSON=function(a){var b=this,c={name:b.curFloor||a[1]||"Floor?",width:a[4]||0,height:a[5]||0,floor:a[6]||[],shopShapes:a[7]||[],shops:a[8]||[],fac:a[9]||[],text:a[10]||[],geoInfo:a[11]||null};b.curFloor=c.name,b.svg.floors[b.curFloor]=c},p._getMapPoint=function(){var self=this,floor=self.svg.floors[self.curFloor].floor,floorShape="string"!=typeof floor?floor[0]:floor,res={min:{},center:{},max:{},all:[]};if(void 0!==floor[1]&&"rect"==floor[1]){var attrs=floorShape.split(/\s+/g),attrsObj={};return attrs.forEach(function(attr){eval("attrsObj."+attr.trim())}),res.min.x=Math.floor(+attrsObj.x),res.min.y=Math.floor(+attrsObj.y),res.max.x=Math.floor(+attrsObj.x+ +attrsObj.width),res.max.y=Math.floor(+attrsObj.y+ +attrsObj.height),res.center.x=(res.min.x+res.max.x)/2,res.center.y=(res.min.y+res.max.y)/2,res.all=[[res.min.x,res.min.y],[res.max.x,res.min.y],[res.max.x,res.max.y],[res.min.x,res.max.y]],res}var pathArray=floorShape.split(/[A-Za-z]/g),proxyX=[],proxyY=[],arr,tempX,tempY;pathArray.forEach(function(a){arr=a.replace(/^\s+|\s+$/g,"").split(/\s+|,+/g),2==arr.length&&(tempX=parseFloat(arr[0]),tempY=parseFloat(arr[1]),proxyX.push(tempX),proxyY.push(tempY),res.all.push([tempX,tempY])),7==arr.length&&(tempX=parseFloat(arr[5]),tempY=parseFloat(arr[6]),proxyX.push(tempX),proxyY.push(tempY),res.all.push([tempX,tempY])),6==arr.length});var mySort=function(a,b){return a-b};return proxyX.sort(mySort),proxyY.sort(mySort),res.min.x=proxyX[0],res.min.y=proxyY[0],res.max.x=proxyX[proxyX.length-1],res.max.y=proxyY[proxyY.length-1],res.center.x=(res.min.x+res.max.x)/2,res.center.y=(res.min.y+res.max.y)/2,res},p._initDomStyle=function(){var a=this,b=a._getMapPoint();a._mapCenter=b.center,a._mapVertexes=b.all;var c=Math.floor(b.max.x+b.min.x+5),d=Math.floor(b.max.y+b.min.y+5);a.zoomDiv.setAttribute("class","atlas-container"),a.mapDiv.setAttribute("class","atlas-content"),a.textDiv.setAttribute("class","atlas-text"),a.svgDom.setAttribute("viewBox","0 0 "+c+" "+d);var e=a.zoomDiv.offsetWidth,f=a.zoomDiv.offsetHeight,g=Math.floor(100*Math.min(e/c,f/d))/100,h=Math.floor(c*g+.5),i=Math.floor(d*g+.5);a.__mapOriginalWidth=3*e,a.__mapOriginalHeight=3*f;var j=Math.round((a.__mapOriginalWidth-h)/2),k=Math.round((a.__mapOriginalHeight-i)/2);a.rotateDiv._upsertStyle({width:"100%",height:"100%",display:"inline"}),a.mapDiv._upsertStyle({width:""+a.__mapOriginalWidth+"px",height:""+a.__mapOriginalHeight+"px"}),a.textDiv._upsertStyle({width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px"}),_upsertStyle({width:""+h+"px",height:""+i+"px",position:"absolute",left:""+j+"px",top:""+k+"px",visibility:"visible",overflow:"visible"},a.svgDom),_upsertStyle({width:"100%",height:"100%",visibility:"visible",overflow:"visible"},a.gDom),a.__svgScale=g,a.__drawScale=g,a.__svgOriginalWidth=h,a.__svgOriginalHeight=i,a.__svgOriginalLeft=j,a.__svgOriginalTop=k},p._updateSvgStyle=function(){var a=this,b=a.scroller.__zoomLevel,c=a.geoRotation;a.__curSvgScale=(a.__svgScale*b).toFixed(4);var d={width:""+Math.floor(a.__svgOriginalWidth*b)+"px",height:""+Math.floor(a.__svgOriginalHeight*b)+"px",left:""+Math.floor(a.__svgOriginalLeft*b)+"px",top:""+Math.floor(a.__svgOriginalTop*b)+"px"};_upsertStyle(d,a.svgDom);var e={};e[a.__vendorPrefix+"-transform-origin"]="50% 50%",e[a.__vendorPrefix+"-transform"]="rotate("+(+a.scroller.__rotateDegree-26-+c)+"deg)",a.compassDiv._upsertStyle(e),a._updateNavigation(),a._updatePathSvg(d)},p._initPathSvg=function(){var a=this;if(a.pathSvg)try{a.textDiv.removeChild(a.pathSvg)}catch(b){}return a.__navPath=null,a.__navText=null,a.__navCircle=null,a.pathSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),a.textDiv.appendChild(a.pathSvg),a.pathSvg.style.cssText="z-index:"+a.__mapZIndex.path+";"+a.svgDom.style.cssText,a.pathSvg},p._updatePathSvg=function(a){if(!this.__isPoiHidden){var b=this;if(b.pathSvg){var c=a;if(c["z-index"]=b.__mapZIndex.path,c.display="block",_upsertStyle(c,b.pathSvg),b.__curNavPath){var d=b.__curSvgScale,e=b.__curFloorRoutePoints,f=b.__curFloorRouteDistance*d;if(b.__navPath){for(var g="M",h=[],i=0,j=e.length;j>i;i++){var k=e[i],l=Math.floor(k[0]*d),m=Math.floor(k[1]*d);h[i]=l+","+m}g+=h.join(" L"),b.__navPath.setAttribute("d",g)}if(b.__navText&&f/40>19){var n=Math.round((f-400)/19);b.__navText.setAttribute("word-spacing",n)}b.__navCircle&&(b.__navCircle.setAttribute("cx",e[0][0]*d),b.__navCircle.setAttribute("cy",e[0][1]*d))}}}},p._updateCoreSvg=function(){var a=this;a._updateSvgStyle(),a._updateTags()},p.zoomTo=function(a,b){var c=this,d=c.zoomDiv.offsetWidth/2,e=c.zoomDiv.offsetHeight/2;c.scroller.zoomTo(a,!1,d,e,c.scroller.options.scrollingComplete),b&&void 0!=b||c._setFontDivSize(),c._updateCoreSvg()},p.refresh=function(){var a=this,b=AtlasUtils.getDomXY(a.atlasDiv);
a.scroller.setPosition(b.x,b.y),a.scroller.setDimensions(a.zoomDiv.clientWidth,this.zoomDiv.clientHeight,a.__mapOriginalWidth||a.mapDiv.offsetWidth,a.__mapOriginalHeight||a.mapDiv.offsetHeight)}}(),function(global){var p=global.prototype,getPathCenter=function(d){if(d){var pathArray=d.split(/[A-Za-z]/g),proxyX=[],proxyY=[];return pathArray.forEach(function(a){var b=a.trim().split(/\s+|,+/g);2==b.length?(proxyX.push(parseFloat(b[0])),proxyY.push(parseFloat(b[1]))):4==b.length?(proxyX.push(parseFloat(b[0])),proxyX.push(parseFloat(b[2])),proxyY.push(parseFloat(b[1])),proxyY.push(parseFloat(b[3]))):6==b.length?(proxyX.push(parseFloat(b[0])),proxyX.push(parseFloat(b[2])),proxyX.push(parseFloat(b[4])),proxyY.push(parseFloat(b[1])),proxyY.push(parseFloat(b[3])),proxyY.push(parseFloat(b[5]))):7==b.length&&(proxyX.push(parseFloat(b[5])),proxyY.push(parseFloat(b[6])))}),{x:Math.floor(eval(proxyX.join("+"))/proxyX.length+.5),y:Math.floor(eval(proxyY.join("+"))/proxyY.length+.5)}}return null};p._clearGdom=function(){var a=this;return a.gDom.innerHTML="",a.gDom.hasChildNodes()&&(a.svgDom.removeChild(a.gDom),a.gDom=document.createElementNS("http://www.w3.org/2000/svg","g"),a.svgDom.appendChild(a.gDom)),a.gDom},p._createPathFragment=function(svgData,sidPaths,drawScale,sidEntity){svgData=svgData||{},sidPaths=sidPaths||{},drawScale=drawScale||1,sidEntity=sidEntity||[];var isHasSid=!1;(sidEntity.length>0||sidEntity===!0)&&(isHasSid=!0);var scale=Math.floor(1/+drawScale*100)/100,fragment=document.createDocumentFragment(),createPathDom=function(a,b,c,d){var e=.3;c=c||"";var f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("class",a),f.setAttribute("d",b),"stroke"==d&&(e=.5,c+="fill: none;fill-opacity: 0;"),c.indexOf("stroke-width")>-1?f.style.cssText=c:f.style.cssText=c+"stroke-width:"+e*scale+"px";var g=c.match(/(sid[^;]+);?/);if(g){var h=g[1].split(":")[1].trim();if(!isHasSid){var i=getPathCenter(b);i&&h&&(i.sid=h,sidEntity.push(i))}void 0==sidPaths[h]?sidPaths[h]={}:(sidPaths[h].borderColor&&(f.style.stroke=sidPaths[h].borderColor,f.style["stroke-width"]=.5*scale),sidPaths[h].fillColor&&(f.style.fill=sidPaths[h].fillColor))}return f},createRectDom=function(className,shape,style,strokeWidth){strokeWidth=strokeWidth||.3,style=style||"";var rect=document.createElementNS("http://www.w3.org/2000/svg","rect");rect.setAttribute("class",className);var attrs=shape.split(/\s+/g),attrsObj={};attrs.forEach(function(attr){eval("attrsObj."+attr.trim())}),rect.setAttribute("x",Math.floor(attrsObj.x)),rect.setAttribute("y",Math.floor(attrsObj.y)),rect.setAttribute("width",Math.floor(attrsObj.width)),rect.setAttribute("height",Math.floor(attrsObj.height)),/(rotate\(.+\))/g.test(style)&&rect.setAttribute("transform",RegExp.$1.replace(/;+/g," ")),style.indexOf("stroke-width")>-1?rect.style.cssText=style:rect.style.cssText=style+"stroke-width:"+strokeWidth*scale+"px";var sidRegResult=style.match(/(sid[^;]+);?/);if(sidRegResult){var sidStr=sidRegResult[1].split(":")[1].trim();if(!isHasSid){var pCenter={x:Math.floor(attrsObj.x+attrsObj.width/2),y:Math.floor(attrsObj.y+attrsObj.height/2),sid:sidStr};sidEntity.push(pCenter)}void 0==sidPaths[sidStr]?sidPaths[sidStr]={}:(sidPaths[sidStr].borderColor&&(rect.style.stroke=sidPaths[sidStr].borderColor,rect.style["stroke-width"]=.5*scale),sidPaths[sidStr].fillColor&&(rect.style.fill=sidPaths[sidStr].fillColor))}return rect},shopShape,type;for(var j in svgData.shopShapes)shopShape=svgData.shopShapes[j],0==shopShape[0]&&(type="atlas-shop-svg atlas-not-accessible","path"==shopShape[2]?fragment.appendChild(createPathDom(type,shopShape[1],shopShape[3])):"rect"==shopShape[2]&&fragment.appendChild(createRectDom(type,shopShape[1],shopShape[3])));for(var j in svgData.shopShapes)shopShape=svgData.shopShapes[j],1==shopShape[0]&&(type="atlas-shop-svg","path"==shopShape[2]?fragment.appendChild(createPathDom(type,shopShape[1],shopShape[3])):"rect"==shopShape[2]&&fragment.appendChild(createRectDom(type,shopShape[1],shopShape[3])));var floorShape,strokeShape;return svgData.floor&&("path"==svgData.floor[1]?(floorShape=createPathDom("atlas-floor-svg",svgData.floor[0],svgData.floor[3]),strokeShape=createPathDom("atlas-floor-svg",svgData.floor[0],svgData.floor[3],"stroke")):"rect"==svgData.floor[1]&&(floorShape=createRectDom("atlas-floor-svg",svgData.floor[0],svgData.floor[3]),strokeShape=createPathDom("atlas-floor-svg",svgData.floor[0],svgData.floor[3],"stroke"))),{floor:floorShape,stroke:strokeShape,shop:fragment}},p._createShadowFragment=function(svgData,drawScale){svgData=svgData||{},drawScale=drawScale||1;var scale=Math.floor(1/+drawScale*100)/100,fragment=document.createDocumentFragment(),createPathDom=function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",b);var d="";return"frame"==a?(c.setAttribute("transform","translate(0 "+2.5*scale+")"),d="stroke: #C9CED1; stroke-width:"+2*scale+";"):c.setAttribute("transform","translate(0 "+1.5*scale+")"),c.style.cssText="fill: #C9CED1;"+d,c},createRectDom=function(type,shape,style){var rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),attrs=shape.split(/\s+/g),attrsObj={};attrs.forEach(function(attr){eval("attrsObj."+attr.trim())}),rect.setAttribute("x",Math.floor(attrsObj.x)),rect.setAttribute("y",Math.floor(attrsObj.y)),rect.setAttribute("width",Math.floor(attrsObj.width)),rect.setAttribute("height",Math.floor(attrsObj.height)),/(rotate\(.+\))/g.test(style)&&rect.setAttribute("transform",RegExp.$1.replace(/;+/g," "));var extraStr="";return"frame"==type?(rect.setAttribute("transform","translate(0 "+2.5*scale+")"),extraStr="stroke: #C9CED1; stroke-width:"+2*scale+";"):rect.setAttribute("transform","translate(0 "+1.5*scale+")"),rect.style.cssText="fill: #C9CED1;"+extraStr,rect},shopShape,type;for(var j in svgData.shopShapes)shopShape=svgData.shopShapes[j],1==shopShape[0]&&(type="atlas-shop-svg","path"==shopShape[2]?fragment.appendChild(createPathDom(type,shopShape[1],shopShape[3])):"rect"==shopShape[2]&&fragment.appendChild(createRectDom(type,shopShape[1],shopShape[3])));var floorShape;return svgData.floor&&("path"==svgData.floor[1]?floorShape=createPathDom("frame",svgData.floor[0],svgData.floor[3],.5):"rect"==svgData.floor[1]&&(floorShape=createRectDom("frame",svgData.floor[0],svgData.floor[3],.5))),{floor:floorShape,shop:fragment}},p._draw=function(a){var b=this,c=b.svg;b._clearGdom(),b.__sidPaths={},(void 0==b.__sidEntity||null==b.__sidEntity)&&(b.__sidEntity={}),(void 0==b.__sidEntity[a]||null==b.__sidEntity[a])&&(b.__sidEntity[a]=[]);var d=b._createPathFragment(c.floors[a],b.__sidPaths,b.__drawScale,b.__sidEntity[a]);if(b.__openShadow&&b.__openShadow===!0){var e=b._createShadowFragment(c.floors[a],b.__drawScale);b.gDom.appendChild(e.floor),b.gDom.appendChild(d.floor),b.gDom.appendChild(e.shop),b.gDom.appendChild(d.shop),b.gDom.appendChild(d.stroke)}else b.gDom.appendChild(d.floor),b.gDom.appendChild(d.shop),b.gDom.appendChild(d.stroke);var f=b.svg.floors[a].geoInfo,g=f&&void 0!=f.owidth&&void 0!=f.width?(+f.owidth/+f.width).toFixed(2):1,h=f&&void 0!=f.oheight&&void 0!=f.height?(+f.oheight/+f.height).toFixed(2):1;b.geoScale={x:+g,y:+h},b.geoRotation=f&&void 0!=f.rotation?Math.round(+f.rotation):0},p.getNearbyZone=function(a,b,c){var d=this,e=d.curFloor,f=d.__sidEntity&&d.__sidEntity[e]||[];if(isNaN(+a)||isNaN(+b)||isNaN(+c))return null;if(0>+a||0>+b||0>+c)return null;a=+a,b=+b;var g,h=+c;if(3>c?(h+=2,g=2):(h+=3,g=4),f.length>0){for(var i=[],j=0;j<f.length;++j){var k=(f[j].x-a)/d.geoScale.x,l=(f[j].y-b)/d.geoScale.y,m=k*k+l*l;(h*h>m||Math.abs(m-h*h)<g)&&f[j].sid&&i.push(f[j].sid)}return i}return null},p.setZoneColor=function(a){var b=this;if(void 0===a||!a)return console.warn('Function["setZoneColor"] must have param.');var c=Object.keys(b.__sidPaths);if(0!=c.length){if(a instanceof Array)for(var d=0,e=a.length;e>d;++d){var f=a[d];if(void 0===f.sid){console.warn('Param of Function["setZoneColor"] must have "sid".');break}b.__sidPaths[f.sid]={borderColor:f.borderColor||null,fillColor:f.fillColor||null}}else a.sid&&(b.__sidPaths[a.sid]={borderColor:a.borderColor||null,fillColor:a.fillColor||""});c.length>0&&b.clearZoneColor(b.__sidPaths)}},p.clearZoneColor=function(){var a=this,b=Object.keys(a.__sidPaths);if(0!=b.length){a._clearGdom(),arguments[0]!==a.__sidPaths&&(a.__sidPaths={});var c=a.svg.floors[a.curFloor],d=a._createPathFragment(c,a.__sidPaths,a.__drawScale,!0);a.gDom.appendChild(d)}},p.moveToCenter=function(a){var a=a&&!0,b=this,c=b.scroller.__maxScrollLeft/2,d=b.scroller.__maxScrollTop/2;b.scroller.scrollTo(c,d,a,null)},p.moveTo=function(a,b,c,d){var e=this,c=c||!1;c&&e.zoomTo(e.options.initZoom),d=d||250,d=Math.max(Math.min(5e3,+d),250),e._moveTo(a,b,d)},p._moveTo=function(a,b,c){var d=this,e=d.zoomDiv.offsetTop,f=d.zoomDiv.offsetLeft,g=d.scroller.__scrollLeft,h=d.scroller.__scrollTop,i=(d._zoomBoundary.maxX-d._zoomBoundary.minX)/2+f,j=(d._zoomBoundary.maxY-d._zoomBoundary.minY)/2+e,k=d.getLeftAndTop(a,b),l=i-k.left,m=j-k.top;d.scroller.scrollTo(g-l,h-m,!0,null,c)},p.moveToPoiId=function(a,b){var c,d=this,e=JSON.stringify(d.svg.floors[d.curFloor]),f=JSON.parse(e),g=f.shops;g.forEach(function(b){b[3]===a&&(b[2]=100,c={x:b[0],y:b[1]})}),f.shops=g,d._clearFilterCache(d.curFloor),d._mapDataForEmphasizeMark=f,c?(b&&b===!0&&d.zoomTo(d.options.initZoom),d.moveTo(c.x,c.y),d.tagTo(c.x,c.y)):console.log('Not found poi with id( "'+a+'" )!')},p.getLeftAndTop=function(a,b){var c=this,d=c.__svgScale,e=c.__svgOriginalLeft,f=c.__svgOriginalTop,g=c.scroller.getValues().zoom,h=c.scroller.__scrollLeft,i=c.scroller.__scrollTop,j=c.zoomDiv.offsetTop,k=c.zoomDiv.offsetLeft,l=c._mapCenter.x,m=c._mapCenter.y,n={};if(+a==+l&&+b==+m)return n.left=(+a*d+e)*g-h-k,n.top=(+b*d+f)*g-i-j,n;var o={x:Math.round(c.rotateDiv.clientWidth/2),y:Math.round(c.rotateDiv.clientHeight/2)},p={x:Math.round((+a*d+e)*g),y:Math.round((+b*d+f)*g)},q=c.getRotatedPoint(o,p,+c.scroller.__rotateDegree);return n.left=q.x-h+k,n.top=q.y-i+j,n},p.getRotatedPoint=function(a,b,c){if(0===c||void 0===c)return b;var d=b.x-a.x,e=b.y-a.y;if(isNaN(d)||isNaN(e))return b;var f=c/180*Math.PI;return{x:+(a.x+Math.cos(f)*d-Math.sin(f)*e).toFixed(3),y:+(a.y+Math.sin(f)*d+Math.cos(f)*e).toFixed(3)}},p.getCoordinateByPosition=function(a,b){var c=this,d=c.__drawScale,e=c.__svgPaddingTop,f=c.__svgPaddingLeft,g=c.scroller.getValues().zoom,h=c.scroller.__scrollLeft,i=c.scroller.__scrollTop,j={};return j.x=((+a+h)/g-f)/d,j.y=((+b+i)/g-e)/d,j},p._initFloor=function(){},p.setFloor=function(a,b){var c=this;c.curFloor=a,c.curFloorId=c.floorObj[a],a in c.svg.floors?(c._resetMap(),c._bufferUIStop(),c._initFloor(c.curFloor),c._floorCallback(),c._clearMsgDiv(),b&&b()):c._getFloorData(c.floorObj[a],function(a){a?(c._setFloorJSON(c.__floorData),c._resetMap(),c._bufferUIStop(),c._clearMsgDiv()):c._stopExec(),c._initFloor(c.curFloor),c._floorCallback(),b&&b()})},p._initMap=function(){var a=this;a.__sidPaths={},a._draw(a.curFloor),a.zoomTo(a.options.initZoom),a.moveToCenter(!0),a._initRotate(),a.rotateDiv._upsertStyle({display:"inline-block"})},p._initLayer=function(){var a=this;a._removeEmphasize(),a.removeTag(),a.removeImgs(),a.textDiv.innerHTML="";var b=a._createMarkerFragment(a.svg.floors[a.curFloor],a.getMarkerPosition,a.icons,a.prods,a.__mapZIndex.poi);a.textDiv.appendChild(b),a.__navigation&&a.setNavigationUI(a.__navigation.x,a.__navigation.y,a.__navigation.radius,a.__navigation.type),a.__poiDivs=a.textDiv.children,a._initPathSvg(),a.__curNavPath&&a._drawNavPath(),a._addEventForLayers(),a.__isPoiHidden=!1,a._setFontDivSize()},p._resetMap=function(){var a=this;a._initDomStyle(),a.refresh(),a._initMap(),a._initLayer()},p._initRotate=function(){var a=this,b=a.curFloor,c=void 0===a.initDegree[b]?a.geoRotation:a.initDegree[b];a._rotateTo(c,null,null,+a.geoRotation)},p._rotateTo=function(a,b,c,d){var e=this;d=d||0,e.scroller.__rotateDegree=a,e.rotateDiv.style[e.__stylePrefix+"Transform"]="rotate("+a+"deg)",e.compassDiv.style[e.__stylePrefix+"Transform"]="rotate("+(a-26-+d)+"deg)",void 0!=b&&void 0!=c&&b&&c?e._moveTo(b,c):e.moveToCenter(),e._setFontDivSize()},p.setNavPath=function(a,b,c,d){var e=this,f=e.floorObj;if(void 0==a.floor||void 0==a.x||void 0==a.y||void 0==b.floor||void 0==b.x||void 0==b.y)return console.error("Invalid arguments for 'setNavPath'.");e.__navStartPos=a,e.__navEndPos=b,null==c&&(c=!1);var g=f[a.floor],h=[a.x,a.y].join(","),i=f[b.floor],j=[b.x,b.y].join(","),k="http://"+e.options.serverHost+"/api/mapeditor/path?start[pos]="+h+"&start[fid]="+g+"&end[pos]="+j+"&end[fid]="+i;AtlasUtils.jsonpCall(k,function(a){a&&a.route?(e.__curNavPath=a.route,e._drawNavPath(),c===!0&&e._navPromptStep(),(d||function(){})(e.__curNavPath)):(console.log("Error: check the path draw in PoiMacth Tool!"),e.__curNavPath=null,(d||function(){})(null))})},p._navPromptStep=function(){var a=this;if(a.__curNavPath&&a.__curNavPath.length>=2){for(var b={1:"电梯",2:"楼梯",3:"扶梯"},c=a.__curNavPath,d=[],e=0,f=c.length;f>e;++e){var g=c[e];if(0==e||e==f-1){var h={x:g.x,y:g.y,fname:a.floorKeys[g.floorId],type:0==e?"起点":"终点"};d.push(h)}else if(g.type&&"string"==typeof g.type){if(g.floorId==c[e+1].floorId&&g.floorId==c[e-1].floorId)continue;var h={x:g.x,y:g.y,fname:a.floorKeys[g.floorId],type:b[g.type]};d.push(h)}}for(var i=[],j=0,k=d.length;k>j;++j)if(j==k-1)i.push("到达目的地");else if(j+1==k-1)i.push("沿着路线行走");else{var h=d[j],l=d[j+1];h.fname==l.fname?i.push("沿路线至"+l.type):i.push("乘"+h.type+"至"+l.fname.match(/[B]?\d/gi)[0]+"楼")}a.__navSteps={index:0,total:d.length,steps:d,logs:i},a._setNavPrompt&&a._setNavPrompt(i[0])}else a.__navSteps=null},p._navStartTag=function(){var a,b=this,c=b.curFloor;!b.__navStartPos||b.__navStartPos&&c!==b.__navStartPos.floor||(a={x:+b.__navStartPos.x,y:+b.__navStartPos.y,width:30,height:30,path:b.__navStartTag,className:"atlas-tag",domId:"atlasNavStartTag",zIndex:b.__mapZIndex.tag},b._addTagImage(a))},p._navEndTag=function(){var a,b=this,c=b.curFloor;!b.__navEndPos||b.__navEndPos&&c!==b.__navEndPos.floor||(a={x:+b.__navEndPos.x,y:+b.__navEndPos.y,width:30,height:30,path:b.__navEndTag,className:"atlas-tag",domId:"atlasNavEndTag",zIndex:b.__mapZIndex.tag},b._addTagImage(a))},p._removeNavTag=function(){var a=this,b=a.atlasDiv.querySelector(".atlas-tag[domId='atlasNavStartTag']"),c=a.atlasDiv.querySelector(".atlas-tag[domId='atlasNavEndTag']");if(b)try{a.textDiv.removeChild(b)}catch(d){}if(c)try{a.textDiv.removeChild(c)}catch(d){}},p._drawNavPath=function(){var a=this,b=a.floorObj[a.curFloor],c=a.__curNavPath,d=a.zoomLevel||a.scroller.__zoomLevel,e=a.__curSvgScale||(a.__svgScale*d).toFixed(4);if(c&&(!c||0!=c.length)){for(var f=[],g=[],h="M",i=0,j=[],k=0,l=c.length;l>k;++k){var m=c[k];if(m.floorId==b){var n=Math.floor(m.x),o=Math.floor(m.y),p=Math.floor(n*e),q=Math.floor(o*e);j.push([n,o]),f.push(p+","+q),g.push(m)}}if(a.__curFloorRoutePoints=j,j.length>=2){for(var r=1,s=j.length;s>r;++r){var t=j[r][0]-j[r-1][0],u=j[r][1]-j[r-1][1];i+=Math.round(Math.pow(t*t+u*u,.5))}a.__curFloorRouteDistance=i}if(f.length>=2){h+=f.join(" L");var v=a._strRepeat(a.__pathSymbol,20);a._drawSvgPath(a.pathSvg,h,v),a.__navPath=a.atlasDiv.getElementsByClassName("atlasNavPath")[0],a.__navText=a.atlasDiv.getElementsByClassName("atlasNavText")[0],a._removeNavTag(),a._navStartTag(),a._navEndTag(),a._updateTags()}else if(1==f.length){var w=f[0].split(","),x=document.createElementNS("http://www.w3.org/2000/svg","circle");x.setAttribute("cx",w[0]),x.setAttribute("cy",w[1]),x.setAttribute("r",5),a.__navCircle=x,a.pathSvg.appendChild(x)}}},p._drawSvgPath=function(a,b,c){for(var d=7,e={};a.hasChildNodes();)a.removeChild(a.firstChild);if(!a.hasChildNodes()){e.ns="http://www.w3.org/2000/svg",e.xmlns="http://www.w3.org/2000/xmlns/",e.xlink="http://www.w3.org/1999/xlink";var f="atlasNavPath"+AtlasUtils.getNavPathId(),g=document.createElementNS(e.ns,"path");g.setAttribute("id",f),g.setAttribute("class","atlasNavPath"),g.setAttribute("d",b);var h="fill: #FFFFFF;stroke:#6faac7;fill-opacity:0;stroke-width:"+d;g.setAttribute("style",h),a.appendChild(g);var i=document.createElementNS(e.ns,"text"),j=document.createElementNS(e.ns,"textPath");j.setAttributeNS(e.xlink,"href","#"+f),i.setAttribute("class","atlasNavText"),i.setAttribute("dy",6),i.setAttribute("dx",20),i.setAttribute("word-spacing","20"),i.setAttribute("x",0),i.setAttribute("fill","#FFF"),j.appendChild(document.createTextNode(c));var k=document.createElementNS(e.ns,"animate");k.setAttribute("attributeName","dx"),k.setAttribute("values","10;30;50;"),k.setAttribute("dur","2s"),k.setAttribute("repeatCount","indefinite"),i.appendChild(j),i.appendChild(k),a.appendChild(i)}},p.clearNavPath=function(){var a=this;a.__curNavPath=null,a.__navSteps=null,a._initPathSvg(),a._removeNavTag()},p.openShadow=function(){var a=this;a.__openShadow||(a.__openShadow=!0,a._draw(a.curFloor))},p.closeShadow=function(){var a=this;a.__openShadow===!0&&(a.__openShadow=!1,a._draw(a.curFloor))},p._getFloorFences=function(a){var b=this;a=a||b.floorObj[b.curFloor];var c="http://"+b.options.serverHost+"/poi/map/fence/getByFloor?floorId="+a;AtlasUtils.jsonpCall(c,function(c){c&&c.fenceIds?b.__fences[a]=c:(console.log("Error: check the fence draw in PoiMacth Tool!"),b.__fences[a]=null)})};var pointInPolygon=function(a,b){var c,d,e=b.length,f=e-1,g=a.x,h=a.y,i=!1;for(c=0;e>c;++c)(b[c][1]<h&&b[f][1]>=h||b[f][1]<h&&b[c][1]>=h)&&(b[c][0]<=g||b[f][0]<=g)&&(d=(b[f][0]-b[c][0])/(b[f][1]-b[c][1]),b[c][0]+(h-b[c][1])*d<g&&(i=!i)),f=c;return i};p.getFenceIds=function(a,b){var c=this,d=c.floorObj[c.curFloor];if(!c.__fences[d]||void 0===c.__fences[d])return null;if(isNaN(+a)||isNaN(+b))return console.log('"x" or "y" must number.');var e=c.__fences[d].fences,f=c.__fences[d].fenceIds;if(e&&void 0===e)return[];var g=[];for(var h in e)pointInPolygon({x:a,y:b},e[h])&&g.push(f[h]||h);return g};var createUid=function(){function a(a){a=a||32;for(var b="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",c=b.length,d="",e=0;a>e;e++)d+=b.charAt(Math.floor(Math.random()*c));return d}var b;return null==localStorage.getItem("atlas_uid")?(b="ats_"+a(Math.floor(5*Math.random()+3))+(new Date).getTime(),localStorage.setItem("atlas_uid",b)):b=localStorage.getItem("atlas_uid"),b};p.sendUserLocation=function(a,b){var c=this,d=c.floorObj[c.curFloor],e=c.options.locOptions||{},f="https://api.atlasyun.com/harvester/floors/{fid}/userloc?data={data}";if(isNaN(+a)||isNaN(+b))return console.log('"x" or "y" must number.');if(!localStorage.getItem("lastSentTime")||null!=localStorage.getItem("lastSentTime")){var g=+localStorage.getItem("lastSentTime"),h=Math.min(e.timeSpacing||30,10);if((new Date).getTime()-g<1e3*h)return}var i,j;i=e.uid&&null!=e.uid&&void 0!==e.uid?e.uid:createUid(),j=e.appId&&null!=e.appId&&void 0!==e.appId?e.appId:"ats_380c231c5e9da44b27";var k={x:+a,y:+b,create_time:(new Date).getTime(),uid:i,clientId:j};d&&(f=f.replace("{fid}",d).replace("{data}",encodeURIComponent(ATLASENCRPY.encrypt("eDnchx=.34yAopQ=",JSON.stringify(k)))),AtlasUtils.jsonpCall(f,function(a){localStorage.setItem("lastSentTime",k.create_time)}))}}(Atlas);var NOOP=function(){};!function(a){var b=a.prototype;b.addText=function(a){var b={x:a.x,y:a.y,content:a.content,color:a.color||null,fontSize:a.fontSize||null},c=this,d=c.textDiv,e=c.getMarkerPosition(b.x,b.y),f=e.left,g=e.top,h=document.createElement("div");h.className="atlas-txt user-defined",h.innerHTML=b.content;var i="position:absolute;top:"+g+"px; left:"+f+"px;z-index:"+c.__mapZIndex.poi+";";return b.color&&(i+="color:"+b.color+";"),b.fontSize&&(i+="font-size:"+b.fontSize+";"),h.style.cssText=i,h.setAttribute("coordinate",b.x+"&"+b.y),d.appendChild(h),h},b.removeText=function(a){var b=this;try{a?b.textDiv.removeChild(a):b._initLayer()}catch(c){console.log(c)}},b.getMarkerPosition=function(a,c,d){var e=this||b,d=d||1,f=(+a*e.__svgScale+e.__svgOriginalLeft)*d-5,g=(+c*e.__svgScale+e.__svgOriginalTop)*d-5;return{left:Math.round(f),top:Math.round(g)}},b._createMarkerFragment=function(a,b,c,d,e){var f=void 0!==a.fac&&a.fac instanceof Array?a.fac:[],g=void 0!==a.shops&&a.shops instanceof Array?a.shops:[],h=void 0!==a.text&&a.text instanceof Array?a.text:[],i=document.createDocumentFragment(),j=function(a){var c=document.createElement("div"),d=b(a.x,a.y),f=d.left,g=d.top;return"fac"==a.type?(c.className=a.className+" atlas-fac",c.setAttribute("title",a.title),c.setAttribute("facId",a.id)):"shop"==a.type?(c.className="atlas-shop",c.setAttribute("poiId",a.id),c.setAttribute("title",a.text),c.innerHTML='<b class="'+a.className+'"></b><strong class="shopText"> '+a.text+"</strong>"):"text"==a.type&&(c.className="atlas-txt",c.innerHTML=a.text),c.style.cssText="position:absolute;display:none;top:"+g+"px; left:"+f+"px;z-index:"+e,c.setAttribute("coordinate",a.coordinate),c};return f.forEach(function(a){i.appendChild(j({type:"fac",x:a[0],y:a[1],className:"atlas "+c[a[3]],title:a[4]||"",coordinate:a[0]+"&"+a[1],id:a[3]}))}),g.forEach(function(a){i.appendChild(j({type:"shop",x:a[0],y:a[1],text:a[4],coordinate:a[0]+"&"+a[1],className:"atlas "+d[a[5]],id:a[3]}))}),h.forEach(function(a){i.appendChild(j({type:"text",x:a[0],y:a[1],text:a[3],coordinate:a[0]+"&"+a[1]}))}),i},b._getFilterData=function(){var a,b=this,c=b.scroller.__zoomLevel,d=b._mapDataForEmphasizeMark||b.svg.floors[b.curFloor],e=b.options.poiDistance||60;return a=b._mapCenter?b._mapCenter:{x:0,y:0},b._filterData[b.curFloor]=b._filterMark({data:d,distance:Math.round(e/c/b.__svgScale),scale:c,center:[a.x,a.y]}),b._filterData[b.curFloor]},b._addEventForLayers=function(){var a=this,b=a.textDiv;"onclick"in window&&(b.onclick=function(b){if(b.preventDefault&&b.preventDefault(),"svg"==b.target.tagName){var c=b.offsetX||b.layerX,d=b.offsetY||b.layerY;a._layerClickHandler(c,d)}else a._layerEventHandler(b.target)})},b._layerClickHandler=function(a,b){var c=this,d=c.scroller.__zoomLevel,e=(c.__svgOriginalLeft,c.__svgOriginalTop,{});return a&&b?(e.x=Math.round(+a/d/c.__svgScale*100)/100,e.y=Math.round(+b/d/c.__svgScale*100)/100,void(c.options.layerClick||function(){})(e)):{x:-1,y:-1}},b._layerEventHandler=function(a){var b,c,d=this,e=!1,f=a.getAttribute("class")||"";if("svg"==a.tagName||"path"==a.nodeName||"text"==a.nodeName||"textPath"==a.nodeName||f.indexOf("user-defined")>-1)return void(d.options.layerClick||function(){})(null);if(f.indexOf("atlas-txt")>-1?(e=!0,c=(a.getAttribute("coordinate")||"-1&-1").split("&"),b={x:+c[0],y:+c[1]},d._markAction(a)):f.indexOf("atlas-fac")>-1?(e=!0,c=(a.getAttribute("coordinate")||"-1&-1").split("&"),b={x:+c[0],y:+c[1]},d._markAction(a)):(f=a.parentNode.getAttribute("class")||"",f.indexOf("atlas-shop")>-1&&(e=!0,c=(a.parentNode.getAttribute("coordinate")||"-1&-1").split("&"),b={x:+c[0],y:+c[1]},d._markAction(a.parentNode))),e)if(-1!==b.x&&-1!==b.y){if(d.moveTo(b.x,b.y),d.tagTo(b.x,b.y),!d.scroller.__didDecelerationComplete)var g=setTimeout(function(){d.moveTo(b.x,b.y),clearTimeout(g)},100)}else console.error('Dom has not attribute "coordinate"!')},b._imgBehavior=function(a,b){var c;c="ontouchstart"in window?"touchstart":"mouseup",a.addEventListener(c,function(a){a.preventDefault&&a.preventDefault(),b()},!1),a.addEventListener("mousedown",function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation()},!1),a.addEventListener("click",function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation()},!1)},b.tagTo=function(a,b,c){var d,e=this;e.removeTag(),d={x:parseFloat(a),y:parseFloat(b),width:22,height:30,path:e.__tagPath,className:"atlas-tag",domId:"atlasPoiTag",zIndex:e.__mapZIndex.tag,action:c||NOOP},e._addTagImage(d),e._updateTags()},b.tagToPoiId=function(a){var b=this,c='div[poiId="'+a+'"]',d=b.textDiv.querySelector(c);if(d){var e=d.getAttribute("coordinate").split("&");b.tagTo(e[0],e[1])}else console.log('Not found poi with id( "'+a+'" )!')},b.removeTag=function(){var a=this,b=a.atlasDiv.querySelector(".atlas-tag[domId='atlasPoiTag']");if(b)try{a.textDiv.removeChild(b)}catch(c){}},b.removeImgs=function(){var a=this,b="div.atlas-img,div.atlasTagImg",c=a.textDiv.querySelectorAll(b);if(c)for(var d=0;d<c.length;++d)a.textDiv.removeChild(c[d])},b.addImgs=function(a){var b=this;a instanceof Array&&(a.forEach(function(a){var c={x:a.x,y:a.y,width:a.width,height:a.height,path:a.url,className:"atlas-img",action:a.action||NOOP};b._addImage(c)}),b.__isPoiHidden=!1,b._setFontDivSize())},b.addTagImgs=function(a){var b=this;if(a instanceof Array){a.forEach(function(a){var c={x:a.x,y:a.y,width:a.width,height:a.height,path:a.url,className:"atlasTagImg",action:a.action||null};b._addTagImage(c)}),b.__isPoiHidden=!1;for(var c=b.atlasDiv.getElementsByClassName("atlasTagImg")||[],d=c.length,e=0;d>e;++e){var f=c[e];c&&b._updateTag(f)}}},b._addTagImage=function(a){var b=this,c=document.createElement("div"),d=b.getMarkerPosition(a.x,a.y),e=d.left,f=d.top-a.height;return c.className=a.className,c.setAttribute("coordinate",a.x+"&"+a.y),a.domId&&c.setAttribute("domId",a.domId),c.style.cssText="position:absolute;width:"+a.width+"px;height:"+a.height+"px;background:url("+a.path+") no-repeat;background-size:"+a.width+"px "+a.height+"px ; top:"+f+"px; left:"+e+"px;z-index:"+(a.zIndex||b.__mapZIndex.tagImg),a.action&&b._imgBehavior(c,a.action),b.textDiv.appendChild(c),c},b._addImage=function(a){var b=this,c=b.scroller.__zoomLevel,d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div");e.setAttribute("class","atlas-info-content"),f.setAttribute("class","atlas-info-sharp"),d.setAttribute("class",a.className||"atlas-img");var g=!a.height||a.height<16?16:a.height,h=15,i=1,j=b.getMarkerPosition(a.x,a.y,c),k=j.left-a.width/2+15,l=j.top-g-2*i;e.setAttribute("style","padding:"+i+"px;width: "+a.width+"px;height:"+g+"px;background:url("+a.path+") no-repeat;background-size:"+a.width+"px "+g+"px ;"),f.setAttribute("style","height:"+h+"px");var m="width:"+(a.width+2*i)+"px;height:auto;display:inline-block;position: absolute;left:"+k+"px;top:"+l+"px;z-index:"+b.__mapZIndex.img+";";return d.setAttribute("style",m),d.setAttribute("coordinate",a.x+"&"+a.y),d.setAttribute("wh",a.width+2*i+"&"+(a.height+h+2*i+2)),d.appendChild(e),d.appendChild(f),b.textDiv.appendChild(d),b._imgBehavior(d,a.action),d},b.enFacility=function(a){var b=this;b._initLayer(),a instanceof Array?a.length>0&&b._emphasizeFac(a):b._emphasizeFac([a])},b._emphasizeFac=function(a){var b=this,c=JSON.stringify(b.svg.floors[b.curFloor]),d=JSON.parse(c),e=d.fac,f=function(a,b){if(!(a instanceof Array)&&0==a.length)return!1;for(var c=!1,d=0;d<a.length;d++)if(Math.floor(a[d])==Math.floor(b)){c=!0;break}return c};a.forEach(function(a){var c='div[facId="'+a+'"]',d=b.textDiv.querySelectorAll(c);if(d)for(var e=0,f=d.length;f>e;++e){var g=d[e].className;g.indexOf("emphasize")>-1&&(g=g.replace(/(emphasize)+/gi,"")),d[e].className=g+" emphasize"}}),e.forEach(function(b){f(a,b[3])&&(b[2]=100)}),d.fac=e,b._clearFilterCache(b.curFloor),b._mapDataForEmphasizeMark=d,b.zoomTo(1),b.moveToCenter()},b._removeEmphasize=function(){var a=this,b="div.emphasize",c=a.textDiv.querySelectorAll(b);if(a._clearFilterCache(a.curFloor),a._mapDataForEmphasizeMark=null,c)for(var d=0;d<c.length;++d){var e=c[d].className;c[d].className=e.replace(/(emphasize)+/gi,"")}},b._clearFilterCache=function(a){var b=this;a?(b._filtered[a]=null,b._filterDistance[a]=null,b._filterScale[a]=null):(b._filtered={},b._filterDistance={},b._filterScale={})},b._filterMark=function(a){var b,c=this,d=a.data||{},e=a.distance||null,f=a.scale||null,g=a.center||[],h=d.name;if(f>=c.scroller.options.maxZoom||0==e)return d.shops.concat(d.fac).concat(d.text);var i=[],j=[],k=function(a,b){if(!a.length||0==a.length)return!1;var c=!1;for(var d in a)if(a[d]==b||a[d][0]==b[0]&&a[d][1]==b[1]){c=!0;break}return c},l=function(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))},m=function(a,b){return b.forEach(function(b){var c=[];for(var d in a){var f=l(b,a[d]);f>e&&c.push(a[d])}a=c}),a},n=function(a,b,c){for(;a.length>0;)a=m(a,b),a.length>0&&(b=[a[0]],c=c.concat(b)),a.splice(0,1);return[].concat(c)},o=function(a,b){var c=parseFloat(b[2])-parseFloat(a[2]);return 0!==c?c:g&&2==g.length?l(a,g)-l(b,g):parseFloat(b[0])-parseFloat(a[0])};if(c._filtered[h]&&c._filterDistance[h]&&c._filterDistance[h]>e)if(i=c._filtered[h],j=c._filtered[h],b=d.shops.concat(d.fac).concat(d.text),i.length<b.length){var p=[];for(var q in b)k(i,b[q])||p.push(b[q]);b=[].concat(p),j=n(b,i,j)}else j=[].concat(b);else{b=c._filtered[h]&&c._filterDistance[h]&&c._filterDistance[h]<=e?c._filtered[h]:(d.shops||[]).concat(d.fac).concat(d.text),b=[].concat(b.sort(o));for(var r,s=b.length,q=0,t=b.length;t>q;++q)if(b[q]){if(parseFloat(b[q][2])<100){r=q;break}j.push(b[q]),i.push(b[q])}r&&r>0&&b.splice(0,r),j=i.length<s?n(b,i,j):b}return c._filtered[h]=j,c._filterDistance[h]=e,c._filterScale[h]=f,j},b._setFontDivSize=function(){if(!this.__isPoiHidden){var a=this,b=a.scroller.__zoomLevel,c=a.__poiDivs||[],d=a._getFilterData(),e=-a.scroller.__rotateDegree;a.zoomLevel=+b;for(var f=function(a,b){for(var c,d,e=b.length||0,f=!1,g=0;e>g;++g)if(c=b[g],d=c[0]+"&"+c[1],d==a){f=!0;break}return f},g=0,h=c.length;h>g;++g)if(!("svg"==c[g].tagName||a.__navigation&&c[g]==a.__navigation.dom)){var i=c[g],j=i.getAttribute("coordinate"),k=i.className,l=k.indexOf("atlas-tag")>-1?!0:!1,m=k.indexOf("atlasTagImg")>-1?!0:!1,n=k.indexOf("atlas-img")>-1?!0:!1,o=k.indexOf("atlas-info")>-1?!0:!1,p=k.indexOf("user-defined")>-1?!0:!1;if(!l&&!m)if(p||n||o||f(j,d)){j=j.split("&");var q,r,s,t=a.getMarkerPosition(+j[0],+j[1],b),u=t.left,v=t.top,w=a.__mapZIndex.poi,x="";if(q=i.offsetWidth,r=i.offsetHeight,p){var y=i.style.color,z=i.style.fontSize;x="color:"+y+";font-size:"+z+";"+a.__vendorPrefix+"-transform:rotate("+e+"deg)"}else if(o){var A=i.getAttribute("offset").split("&");u=u-q/2+5+ +A[0],v=v-r/2-10+ +A[1],w=a.__mapZIndex.info,x=a.__vendorPrefix+"-transform:rotate("+e+"deg)"}else if(n){q=i.getAttribute("wh").split("&")[0]||q,r=i.getAttribute("wh").split("&")[1]||r,u=u-q/2+15,v+=15,s=r/2;var B=Math.cos(-e*Math.PI/180),C=Math.sin(-e*Math.PI/180),D=Math.round(-s*B)-s,E=Math.round(-s*C);x=a.__vendorPrefix+"-transform:translate("+E+"px,"+D+"px) rotate("+e+"deg)",w=a.__mapZIndex.img}else x=a.__vendorPrefix+"-transform:rotate("+e+"deg)";var F="position: absolute; width: "+q+"px; height:"+r+"px;top: "+v+"px; left: "+u+"px; z-index:"+w+";"+a.__vendorPrefix+"-transform-origin: 50% 50% 0px;";i.style.cssText=F+x}else i.style.display="none"}}},b._updateTag=function(a){var b=this,c=b.scroller.__zoomLevel,d=-b.scroller.__rotateDegree;a.style.display="";var e=a.offsetWidth,f=a.offsetHeight,g=f/2,h=(a.getAttribute("coordinate")||"0&0").split("&"),i=b.getMarkerPosition(+h[0],+h[1],c),j=i.left+10-e/2,k=i.top+10,l=Math.cos(-d*Math.PI/180),m=Math.sin(-d*Math.PI/180),n=Math.round(-g*l)-g,o=Math.round(-g*m);a.style[b.__stylePrefix+"Transform"]="translate("+o+"px,"+n+"px) rotate("+d+"deg)",a.style.left=j+"px",a.style.top=k+"px"},b._updateTags=function(){var a=this,b=a.atlasDiv.querySelector(".atlas-tag[domId='atlasPoiTag']"),c=a.atlasDiv.querySelector(".atlas-tag[domId='atlasNavStartTag']"),d=a.atlasDiv.querySelector(".atlas-tag[domId='atlasNavEndTag']"),e=[b,c,d];if(e.forEach(function(b){if(b)try{a._updateTag(b)}catch(c){console.log(c)}}),!a.__isPoiHidden)for(var f=a.atlasDiv.getElementsByClassName("atlasTagImg")||[],g=f.length,h=0;g>h;++h){var i=f[h];f&&a._updateTag(i)}},b._hiddenPoiDiv=function(){var a=this,b=a.__poiDivs;if(b&&b.length)for(var c=0,d=b.length;d>c;++c){var e=b[c];"svg"==e.tagName&&(e.style.display="none");var f=e.getAttribute("class"),g=f&&f.indexOf("atlas-tag")>-1?!0:!1;g||a.__navigation&&b[c]==a.__navigation.dom||(e.style.display="none")}a.__isPoiHidden=!0},b.setNavigationUI=function(a,b,c,d,e){if(isNaN(a)||isNaN(b))return void console.error(a,b,"Invalid params x or y.");var f,g,h,i=this,j=i.scroller.__zoomLevel,k=i.geoRotation;i.clearNavigation(),i.__lastNavCoord.fid=i.curFloorId,i.__lastNavCoord.x=a,i.__lastNavCoord.y=b,e=e||function(){},c=c?Math.floor(c):25;var l=1===+d?i.__navArrowImg1:i.__navArrowImg;
void 0==i.__navigation||!i.__navigation||i.__navigation.dom?(f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),f.appendChild(g),f.appendChild(h),i.__navigation={dom:f,type:d,circle:g,arrows:h,x:a,y:b,radius:c}):(i.__navigation.x=a,i.__navigation.y=b,i.__navigation.radius=c);var m=Math.round(c*j*i.__svgScale/2),n=Math.round(m/2),o=i.getMarkerPosition(a,b,j),p=+o.left-m/2+5,q=+o.top-m/2+5;if(i.__navigation.dom._upsertStyle({width:"auto",height:"auto",display:"inline-block",position:"absolute",left:""+p+"px",top:""+q+"px","z-index":""+i.__mapZIndex.nav}),i.__navigation.circle._upsertStyle({width:""+m+"px",height:""+m+"px","border-radius":""+m+"px","background-color":"#B2D8E5",opacity:.5}),i.__navigation.arrows._upsertStyle({left:""+(n-8)+"px",top:""+(n-9)+"px",width:"18px",height:"18px",position:"absolute",background:'url("'+l+'") no-repeat',"background-size":"16px 16px","background-position":"center"}),window.DeviceOrientationEvent&&1!==+d){var r,s;window.addEventListener("deviceorientation",function(a){if(i.__navigation){var b;if(a.webkitCompassHeading||"ios"==i.__deviceType?(b=a.webkitCompassHeading||a.alpha,b=360-b+k):b=a.alpha+k,!(r&&Math.abs(+r-b)<5)){+(new Date).getTime()-s<600,r=b,s=(new Date).getTime();var c={};c[i.__vendorPrefix+"-transform"]="rotate(-"+b+"deg)",i.__navigation.dom._upsertStyle(c),e(b)}}},!1)}i.textDiv.appendChild(i.__navigation.dom)},b._clearNavigation=function(){var a=this;if(a.__navigation){try{a.textDiv.removeChild(a.__navigation.dom)}catch(b){}a.__navigation=null}},b.clearNavigation=b._clearNavigation,b._updateNavigation=function(a,b){var c=this,d=c.scroller.__zoomLevel;if(void 0!=c.__navigation&&c.__navigation&&c.__navigation.dom){c.__navigation.x=a||c.__navigation.x,c.__navigation.y=b||c.__navigation.y;var e=c.__navigation.dom,f=c.__navigation.circle,g=c.__navigation.arrows,h=c.__navigation.x,i=c.__navigation.y,j=c.__navigation.radius,k=Math.round(j*d*c.__svgScale/2),l=Math.round(k/2),m=-k/2,n=c.getMarkerPosition(h,i,d),o=+n.left+m+5,p=+n.top+m+5;e._upsertStyle({left:o+"px",top:p+"px"}),f._upsertStyle({width:k+"px",height:k+"px","border-radius":k+"px"}),g._upsertStyle({left:l-9+"px",top:l-9+"px"})}},b.updateNavigation=function(a,b,c,d){var e=this;if(isNaN(a)||isNaN(b))return void console.error(a,b,"Invalid params x or y.");e.__navRunningId&&(core.effect.Animate.stop(e.__navRunningId),e.__navRunningId=!1);var f=e.curFloorId;if(c&&null!=c){var g=e.__lastNavCoord;if(!g||g&&g.fid!==f)e._updateNavigation(a,b),e.__lastNavCoord.fid=f,e.__lastNavCoord.x=a,e.__lastNavCoord.y=b;else if((null==d||0>d)&&(d=1e3),200>=d)e._updateNavigation(a,b);else{var h=g.x,i=g.y,j=a-h,k=b-i,l=function(a){e.__lastNavCoord.fid=f,e.__lastNavCoord.x=+(h+j*a).toFixed(6),e.__lastNavCoord.y=+(i+k*a).toFixed(6),e._updateNavigation(e.__lastNavCoord.x,e.__lastNavCoord.y)},m=function(a){return e.__navRunningId===a},n=function(){},o=function(a){return Math.pow(a-1,3)+1};e.__navRunningId=core.effect.Animate.start(l,m,n,d,o)}}else e._updateNavigation(a,b),e.__lastNavCoord.fid=f,e.__lastNavCoord.x=a,e.__lastNavCoord.y=b},b.addWindowInfo=function(a){var b=this,c=b.scroller.__zoomLevel,d=-b.scroller.__rotateDegree,e=a.content,f=a.coords,g=a.size,h=a.offset,i=a.arrows;h||(h={left:0,top:0});var j=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div");k.textContent=e,k.setAttribute("class","atlas-info-content"),l.setAttribute("class",i?"atlas-info-sharp":"atlas-info-sharp-none"),j.setAttribute("class","atlas-info");var m=!g.height||g.height<16?16:g.height,n=15,o=5,p=b.getMarkerPosition(f.x,f.y,c),q=p.left-g.width/2+5+h.left,r=p.top-m-2*o+h.top;k.setAttribute("style","padding:"+o+"px;width: "+g.width+"px;height:"+m+"px;"),l.setAttribute("style","height:"+n+"px");var s=b.__vendorPrefix+"-transform:rotate("+d+"deg)",t="width:"+(g.width+2*o)+"px;height:auto;display:inline-block;position: absolute;left:"+q+"px;top:"+r+"px;z-index:"+b.__mapZIndex.info+";";return j.setAttribute("style",t+s),j.setAttribute("coordinate",f.x+"&"+f.y),j.setAttribute("offset",h.left+"&"+h.top),j.appendChild(k),j.appendChild(l),b.textDiv.appendChild(j),j},b.setMarkerPoint=function(){}}(Atlas),function(a){function b(a){return function(b,c,d){return a(b,d)}}function c(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function d(a){var b,c=-1;return b=a.length,function(){return c++,b>c?c:null}}function e(a){return function(){if(null===a)throw new Error("Callback was already called.");a.apply(this,arguments),a=null}}var f=function(a,f,g){return function(a,b,f){function g(){var c=!0;return null===i?f(null):(b(a[i],i,e(function(a){if(a)f(a);else{if(i=h(),null===i)return f(null);c?setTimeout(g,0):g()}})),void(c=!1))}f=c(f||function(){}),a=a||[];var h=d(a),i=h();g()}(a,b(f),g)},g=a.prototype;g._getFloorData_=g._getFloorData,g._getLocalStorage=function(a){return window.localStorage.getItem(a)},g._setLocalStorage=function(a,b){window.localStorage.setItem(a,b)},g._getFloorData=function(a,b){var c=this,d=c._getLocalStorage(a);if(d)try{c.__floorData=JSON.parse(ATLASENCRPY.decrypt("ap.atlasyun.com",d)),c.curFloor=c.floorKeys[a]||"Floor?",c.curFloorId=a,setTimeout(function(){b(!0)},0)}catch(e){c._getFloorData_(a,b)}else c._getFloorData_(a,b)},g._getLastUpdateOfFloor=function(a){var b=this;a=a||[];var c={};return a.forEach(function(a){var d=a+"_updated";c[a]=+(b._getLocalStorage(d)||-1)}),c},g._cacheLastUpdateOfFloor=function(a){var b=this;a=a||{};for(var c in a)if(null!=a[c]){var d=c+"_updated";b._setLocalStorage(d,a[c])}},g._getCacheIds=function(a){var b,c=this,d=Object.keys(c.floorKeys),e=c._getLastUpdateOfFloor(d);b="http://"+c.options.serverHost+"/poi/map/floor/getLastupdated?id=",b+=d.join("|"),AtlasUtils.jsonpCall(b,function(b){if(b){c._cacheLastUpdateOfFloor(b);var f=[];d.forEach(function(a){b[a]!=e[a]?f.push(a):c._getLocalStorage(a)||f.push(a)}),a(f)}else a(null)})},g.cacheMapData=function(a){a=a||function(){};var b,c=this;c._getCacheIds(function(d){d?f(d,function(a,d){b=c.options.apiUrl?c.options.apiUrl+"?id=":"http://"+c.options.serverHost+"/poi/map/floor/getSimple?id=";var e=b+a;AtlasUtils.jsonpCall(e,function(b){b?(c._setLocalStorage(a,b),d(null,1)):d(null,0)})},function(b){a(b?b:null)}):a(null)})},g.clearMapCache=function(){if(confirm("确定清除缓存！")){var a=this,b=Object.keys(a.floorKeys);return b.forEach(function(a){window.localStorage.removeItem(a)}),!0}}}(Atlas);
